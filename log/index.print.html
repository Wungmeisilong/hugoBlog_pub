<!DOCTYPE html>
<html lang="zh" dir="ltr" itemscope itemtype="http://schema.org/Article" data-r-output-format="print">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta name="generator" content="Hugo 0.145.0">
    <meta name="generator" content="Relearn 7.6.1">
    <meta name="description" content="menuPre = ‘’ 4.自定义页面以康奈尔笔记格式输出3.github和atomgit的混合使用，哪些是值得注意的？2.git与github的使用1.博客优化笔记7.初次安装AD需要做哪些设置？6.云端一体化的环境变量问题5.云端一体化如何查看云函数日志？8.如何用旧电脑搭建自己的服务器？9.唛盟杯项目下载与启动">
    <meta name="author" content="">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="  博客文章 :: Maloudown">
    <meta name="twitter:description" content="menuPre = ‘’ 4.自定义页面以康奈尔笔记格式输出3.github和atomgit的混合使用，哪些是值得注意的？2.git与github的使用1.博客优化笔记7.初次安装AD需要做哪些设置？6.云端一体化的环境变量问题5.云端一体化如何查看云函数日志？8.如何用旧电脑搭建自己的服务器？9.唛盟杯项目下载与启动">
    <meta property="og:url" content="https://github.com/Wungmeisilong/hugoBlog_pub.git/log/">
    <meta property="og:site_name" content="Maloudown">
    <meta property="og:title" content="  博客文章 :: Maloudown">
    <meta property="og:description" content="menuPre = ‘’ 4.自定义页面以康奈尔笔记格式输出3.github和atomgit的混合使用，哪些是值得注意的？2.git与github的使用1.博客优化笔记7.初次安装AD需要做哪些设置？6.云端一体化的环境变量问题5.云端一体化如何查看云函数日志？8.如何用旧电脑搭建自己的服务器？9.唛盟杯项目下载与启动">
    <meta property="og:locale" content="zh">
    <meta property="og:type" content="website">
    <meta itemprop="name" content="  博客文章 :: Maloudown">
    <meta itemprop="description" content="menuPre = ‘’ 4.自定义页面以康奈尔笔记格式输出3.github和atomgit的混合使用，哪些是值得注意的？2.git与github的使用1.博客优化笔记7.初次安装AD需要做哪些设置？6.云端一体化的环境变量问题5.云端一体化如何查看云函数日志？8.如何用旧电脑搭建自己的服务器？9.唛盟杯项目下载与启动">
    <meta itemprop="datePublished" content="2025-04-06T09:06:05+08:00">
    <meta itemprop="dateModified" content="2025-04-06T09:06:05+08:00">
    <meta itemprop="wordCount" content="169">
    <title>  博客文章 :: Maloudown</title>
    <link href="https://github.com/Wungmeisilong/hugoBlog_pub.git/log/" rel="canonical" type="text/html" title="  博客文章 :: Maloudown">
    <link href="../Wungmeisilong/hugoBlog_pub.git/log/index.xml" rel="alternate" type="application/rss+xml" title="  博客文章 :: Maloudown">
    <link href="../Wungmeisilong/hugoBlog_pub.git/fonts/fontawesome/css/fontawesome-all.min.css?1743933522" rel="stylesheet" media="print" onload="this.media='all';this.onload=null;"><noscript><link href="../Wungmeisilong/hugoBlog_pub.git/fonts/fontawesome/css/fontawesome-all.min.css?1743933522" rel="stylesheet"></noscript>
    <link href="../Wungmeisilong/hugoBlog_pub.git/css/perfect-scrollbar/perfect-scrollbar.min.css?1743933522" rel="stylesheet">
    <link href="../Wungmeisilong/hugoBlog_pub.git/css/theme.min.css?1743933522" rel="stylesheet">
    <link href="../Wungmeisilong/hugoBlog_pub.git/css/format-print.min.css?1743933522" rel="stylesheet" id="R-format-style">
    <link href="../Wungmeisilong/hugoBlog_pub.git/css/auto-complete/auto-complete.min.css?1743933522" rel="stylesheet">
    <script src="../Wungmeisilong/hugoBlog_pub.git/js/auto-complete/auto-complete.min.js?1743933522" defer></script>
    <script src="../Wungmeisilong/hugoBlog_pub.git/js/lunr/lunr.min.js?1743933522" defer></script>
    <script src="../Wungmeisilong/hugoBlog_pub.git/js/lunr/lunr.stemmer.support.min.js?1743933522" defer></script>
    <script src="../Wungmeisilong/hugoBlog_pub.git/js/lunr/lunr.multi.min.js?1743933522" defer></script>
    <script src="../Wungmeisilong/hugoBlog_pub.git/js/lunr/lunr.zh.min.js?1743933522" defer></script>
    <script src="../Wungmeisilong/hugoBlog_pub.git/js/search.min.js?1743933522" defer></script>
    <script>
      window.relearn = window.relearn || {};
      // configuration
      window.relearn.min = `.min`;
      window.relearn.path='\/log\/';
      window.relearn.relBasePath='..';
      window.relearn.relBaseUri='..\/..\/..';
      window.relearn.absBaseUri='https:\/\/github.com\/Wungmeisilong\/hugoBlog_pub.git';
      window.relearn.contentLangs=['zh'];
      window.relearn.index_js_url="../Wungmeisilong/hugoBlog_pub.git/searchindex.zh.js?1743933522";
      window.relearn.disableAnchorCopy=false;
      window.relearn.disableAnchorScrolling=false;
      window.relearn.disableInlineCopyToClipboard=false;
      window.relearn.enableBlockCodeWrap=true;
      // legal
      window.relearn.getItem = (s,n) => {return s.getItem(n)};
      window.relearn.setItem = (s,n,v) => {return s.setItem(n,v)};
      window.relearn.removeItem = (s,n) => {return s.removeItem(n)};
      // variant stuff
      window.relearn.themevariants = [ 'auto', 'zen-light', 'zen-dark', 'neon', 'red' ];
      window.relearn.customvariantname = "my-custom-variant";
      window.relearn.changeVariant = function(variant) {
        var oldVariant = document.documentElement.dataset.rThemeVariant;
        window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        document.documentElement.dataset.rThemeVariant = variant;
        if (oldVariant != variant) {
          document.dispatchEvent( new CustomEvent('themeVariantLoaded', { detail: { variant, oldVariant } }) );
          window.relearn.markVariant();
        }
      }
      window.relearn.markVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant");
        document.querySelectorAll(".R-variantswitcher select").forEach((select) => {select.value = variant;});
      }
      window.relearn.initVariant = function() {
        var variant = window.relearn.getItem(window.localStorage, window.relearn.absBaseUri + "/variant") ?? "";
        if( variant == window.relearn.customvariantname ){
        }else if( !variant || !window.relearn.themevariants.includes(variant) ){
          variant = window.relearn.themevariants[0];
          window.relearn.setItem(window.localStorage, window.relearn.absBaseUri + "/variant", variant);
        }
        document.documentElement.dataset.rThemeVariant = variant;
      }
      window.relearn.initVariant();
      window.relearn.markVariant();
      // translations
      window.T_Copy_to_clipboard = `复制到剪贴板`;
      window.T_Copied_to_clipboard = `复制到剪贴板！`;
      window.T_Copy_link_to_clipboard = `将链接复制到剪贴板`;
      window.T_Link_copied_to_clipboard = `链接复制到剪贴板！`;
      window.T_Reset_view = `重置视图`;
      window.T_View_reset = `查看重置！`;
      window.T_No_results_found = `找不到"{0}"的结果`;
      window.T_N_results_found = `为"{0}"找到 {1} 个结果`;
    </script>

<style>
  :root {
      --MENU-WIDTH-S: 9.375rem;
      --MENU-WIDTH-M: 9.375rem;
      --MENU-WIDTH-L: 12.75rem;
      --color-primary: #2c3e50;           
  --color-background-light: #f8f9fa;  
  }
 
.app-container {
  font-family: 'Open Sans', sans-serif;
  line-height: 1.6;
  color: #34495e;
  margin: 0;
}

 
.primary-navigation {                 
  background: var(--color-primary);
  padding: 2rem 0;
}

.navigation-menu {                    
  display: flex;
  gap: 2rem;
  list-style: none;
  padding: 0;
  margin: 0;
}

 
.content-card {                       
  background: white;
  padding: 2rem;
  margin-bottom: 2rem;
  border-radius: 8px;
  box-shadow: 0 2px 15px rgba(0,0,0,0.1);
}

 
.preview-section {                    
  background: var(--color-background-light);
  padding: 2rem;
  border-radius: 8px;
}

 
.action-link {                        
  color: var(--color-primary);
  text-decoration: none;
  font-weight: 500;
}

 
.media-container {                    
  width: 100%;
  border-radius: 8px;
  overflow: hidden;
  margin-bottom: 1.5rem;
}

.media-container img {
  width: 100%;
  height: 200px;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.media-container:hover img {
  transform: scale(1.02);
}

 
@media (min-width: 768px) {
  .grid-layout {                      
    display: grid;
    grid-template-columns: 3fr 1fr;
    gap: 3rem;
  }
}

@media (max-width: 768px) {
  .media-container img {
    height: 150px;
  }
}
  </style>
  

  
  </head>
  <body class="mobile-support print" data-url="../Wungmeisilong/hugoBlog_pub.git/log/">
    <div id="R-body" class="default-animation">
      <div id="R-body-overlay"></div>
      <nav id="R-topbar">
        <div class="topbar-wrapper">
          <div class="topbar-sidebar-divider"></div>
          <div class="topbar-area topbar-area-start" data-area="start">
            <div class="topbar-button topbar-button-sidebar" data-content-empty="disable" data-width-s="show" data-width-m="hide" data-width-l="hide"><button class="topbar-control" onclick="toggleNav()" type="button" title="导航 (CTRL&#43;ALT&#43;n)"><i class="fa-fw fas fa-bars"></i></button>
            </div>
            <div class="topbar-button topbar-button-toc" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="目录 (CTRL&#43;ALT&#43;t)"><i class="fa-fw fas fa-list-alt"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper"> 
                </div>
              </div>
            </div>
          </div>
          <ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype="http://schema.org/BreadcrumbList">
            <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><a itemprop="item" href="../Wungmeisilong/hugoBlog_pub.git/"><span itemprop="name">技术博客 | 智能物联时代</span></a><meta itemprop="position" content="1">&nbsp;>&nbsp;</li>
            <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class=""><span itemprop="name">  博客文章</span><meta itemprop="position" content="2"></li>
          </ol>
          <div class="topbar-area topbar-area-end" data-area="end">
            <div class="topbar-button topbar-button-print" data-content-empty="disable" data-width-s="area-more" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../Wungmeisilong/hugoBlog_pub.git/log/index.print.html" title="打印整章 (CTRL+ALT+p)"><i class="fa-fw fas fa-print"></i></a>
            </div>
            <div class="topbar-button topbar-button-prev" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../Wungmeisilong/hugoBlog_pub.git/" title="技术博客 | 智能物联时代 (🡐)"><i class="fa-fw fas fa-chevron-left"></i></a>
            </div>
            <div class="topbar-button topbar-button-next" data-content-empty="disable" data-width-s="show" data-width-m="show" data-width-l="show"><a class="topbar-control" href="../Wungmeisilong/hugoBlog_pub.git/log/4.%E8%87%AA%E5%AE%9A%E4%B9%89%E9%A1%B5%E9%9D%A2%E4%BB%A5%E5%BA%B7%E5%A5%88%E5%B0%94%E7%AC%94%E8%AE%B0%E6%A0%BC%E5%BC%8F%E8%BE%93%E5%87%BA/" title="4.自定义页面以康奈尔笔记格式输出 (🡒)"><i class="fa-fw fas fa-chevron-right"></i></a>
            </div>
            <div class="topbar-button topbar-button-more" data-content-empty="hide" data-width-s="show" data-width-m="show" data-width-l="show"><button class="topbar-control" onclick="toggleTopbarFlyout(this)" type="button" title="更多"><i class="fa-fw fas fa-ellipsis-v"></i></button>
              <div class="topbar-content">
                <div class="topbar-content-wrapper">
                  <div class="topbar-area topbar-area-more" data-area="more">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
      <div id="R-main-overlay"></div>
      <main id="R-body-inner" class="highlightable log" tabindex="-1">
        <div class="flex-block-wrapper">
<article class="default">
  <header class="headline">
  </header>

<h1 id="博客文章">  博客文章</h1>

<p>menuPre = &lsquo;<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" height="20" width="20"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path d="M192 32c0 17.7 14.3 32 32 32c123.7 0 224 100.3 224 224c0 17.7 14.3 32 32 32s32-14.3 32-32C512 128.9 383.1 0 224 0c-17.7 0-32 14.3-32 32zm0 96c0 17.7 14.3 32 32 32c70.7 0 128 57.3 128 128c0 17.7 14.3 32 32 32s32-14.3 32-32c0-106-86-192-192-192c-17.7 0-32 14.3-32 32zM96 144c0-26.5-21.5-48-48-48S0 117.5 0 144L0 368c0 79.5 64.5 144 144 144s144-64.5 144-144s-64.5-144-144-144l-16 0 0 96 16 0c26.5 0 48 21.5 48 48s-21.5 48-48 48s-48-21.5-48-48l0-224z"/></svg>&rsquo;
<ul class="children children-li children-sort-">
  <li class="children-title"><a href="../Wungmeisilong/hugoBlog_pub.git/log/4.%E8%87%AA%E5%AE%9A%E4%B9%89%E9%A1%B5%E9%9D%A2%E4%BB%A5%E5%BA%B7%E5%A5%88%E5%B0%94%E7%AC%94%E8%AE%B0%E6%A0%BC%E5%BC%8F%E8%BE%93%E5%87%BA/">4.自定义页面以康奈尔笔记格式输出</a><ul></ul></li>
  <li class="children-title"><a href="../Wungmeisilong/hugoBlog_pub.git/log/3.github%E5%92%8Catomgit%E7%9A%84%E6%B7%B7%E5%90%88%E4%BD%BF%E7%94%A8%E5%93%AA%E4%BA%9B%E6%98%AF%E5%80%BC%E5%BE%97%E6%B3%A8%E6%84%8F%E7%9A%84/">3.github和atomgit的混合使用，哪些是值得注意的？</a><ul></ul></li>
  <li class="children-title"><a href="../Wungmeisilong/hugoBlog_pub.git/log/2.git%E4%B8%8Egithub%E7%9A%84%E4%BD%BF%E7%94%A8/">2.git与github的使用</a><ul></ul></li>
  <li class="children-title"><a href="../Wungmeisilong/hugoBlog_pub.git/log/1.%E5%8D%9A%E5%AE%A2%E4%BC%98%E5%8C%96%E7%AC%94%E8%AE%B0/">1.博客优化笔记</a><ul></ul></li>
  <li class="children-title"><a href="../Wungmeisilong/hugoBlog_pub.git/log/7.%E5%88%9D%E6%AC%A1%E5%AE%89%E8%A3%85ad%E9%9C%80%E8%A6%81%E5%81%9A%E5%93%AA%E4%BA%9B%E8%AE%BE%E7%BD%AE/">7.初次安装AD需要做哪些设置？</a><ul></ul></li>
  <li class="children-title"><a href="../Wungmeisilong/hugoBlog_pub.git/log/6.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E7%9A%84%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%97%AE%E9%A2%98/">6.云端一体化的环境变量问题</a><ul></ul></li>
  <li class="children-title"><a href="../Wungmeisilong/hugoBlog_pub.git/log/5.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/">5.云端一体化如何查看云函数日志？</a><ul></ul></li>
  <li class="children-title"><a href="../Wungmeisilong/hugoBlog_pub.git/log/8.%E5%A6%82%E4%BD%95%E7%94%A8%E6%97%A7%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8/">8.如何用旧电脑搭建自己的服务器？</a><ul></ul></li>
  <li class="children-title"><a href="../Wungmeisilong/hugoBlog_pub.git/log/9.%E5%94%9B%E7%9B%9F%E6%9D%AF%E9%A1%B9%E7%9B%AE%E4%B8%8B%E8%BD%BD%E4%B8%8E%E5%90%AF%E5%8A%A8/">9.唛盟杯项目下载与启动</a><ul></ul></li>
</ul></p>
<p><a href="https://blog.csdn.net/m0_52062236/article/details/124314161" rel="external" target="_blank">常用的数学表达</a></p>
<p><a href="https://blog.csdn.net/m0_37167788/article/details/78603307" rel="external" target="_blank">常用箭头</a></p>
<p><a href="https://blog.csdn.net/u012028275/article/details/119839411" rel="external" target="_blank">常用函数图像公式</a></p>

  <footer class="footline">
              <i class='fa-fw fas fa-calendar'></i> 2025年4月6日
  </footer>
</article>
          <section>
            <h1 class="a11y-only">  博客文章 的子部分</h1>
<article class="default">
  <header class="headline">
  </header>

<h1 id="4自定义页面以康奈尔笔记格式输出">4.自定义页面以康奈尔笔记格式输出</h1>

<link rel="stylesheet" href="css/my-css/cornell-notes.css"> <div class="cornell-notes"> <div class="cues">
<h2 id="cues">Cues</h2>
<ul>
<li><a href="../Wungmeisilong/hugoBlog_pub.git/log/4.%E8%87%AA%E5%AE%9A%E4%B9%89%E9%A1%B5%E9%9D%A2%E4%BB%A5%E5%BA%B7%E5%A5%88%E5%B0%94%E7%AC%94%E8%AE%B0%E6%A0%BC%E5%BC%8F%E8%BE%93%E5%87%BA/#cues">Cues</a></li>
<li><a href="../Wungmeisilong/hugoBlog_pub.git/log/4.%E8%87%AA%E5%AE%9A%E4%B9%89%E9%A1%B5%E9%9D%A2%E4%BB%A5%E5%BA%B7%E5%A5%88%E5%B0%94%E7%AC%94%E8%AE%B0%E6%A0%BC%E5%BC%8F%E8%BE%93%E5%87%BA/#notes">Notes</a>
<ul>
<li><a href="../Wungmeisilong/hugoBlog_pub.git/log/4.%E8%87%AA%E5%AE%9A%E4%B9%89%E9%A1%B5%E9%9D%A2%E4%BB%A5%E5%BA%B7%E5%A5%88%E5%B0%94%E7%AC%94%E8%AE%B0%E6%A0%BC%E5%BC%8F%E8%BE%93%E5%87%BA/#创建css文件">创建css文件</a></li>
<li><a href="../Wungmeisilong/hugoBlog_pub.git/log/4.%E8%87%AA%E5%AE%9A%E4%B9%89%E9%A1%B5%E9%9D%A2%E4%BB%A5%E5%BA%B7%E5%A5%88%E5%B0%94%E7%AC%94%E8%AE%B0%E6%A0%BC%E5%BC%8F%E8%BE%93%E5%87%BA/#在hugo配置中设置">在hugo配置中设置</a></li>
<li><a href="../Wungmeisilong/hugoBlog_pub.git/log/4.%E8%87%AA%E5%AE%9A%E4%B9%89%E9%A1%B5%E9%9D%A2%E4%BB%A5%E5%BA%B7%E5%A5%88%E5%B0%94%E7%AC%94%E8%AE%B0%E6%A0%BC%E5%BC%8F%E8%BE%93%E5%87%BA/#在markdown文档中引用">在markdown文档中引用</a></li>
</ul>
</li>
<li><a href="../Wungmeisilong/hugoBlog_pub.git/log/4.%E8%87%AA%E5%AE%9A%E4%B9%89%E9%A1%B5%E9%9D%A2%E4%BB%A5%E5%BA%B7%E5%A5%88%E5%B0%94%E7%AC%94%E8%AE%B0%E6%A0%BC%E5%BC%8F%E8%BE%93%E5%87%BA/#summary">Summary</a></li>
</ul>
<p><strong>标签/提示</strong> ：静态网页，康奈尔笔记，hugo，自定义页面输出格式。</p>
</div>
<div class="notes">
<h2 id="notes">Notes</h2>
<h3 id="创建css文件">创建css文件</h3>
<p>康奈尔笔记的布局，其中左侧是 &ldquo;Cues&rdquo;，右侧是 &ldquo;Notes&rdquo;，底部是 &ldquo;Summary&rdquo;，您可以使用 Flexbox 的 row 和 column 布局来实现。这里是一个 CSS 示例，它将创建一个两列的布局，左侧为 &ldquo;Cues&rdquo;，右侧为 &ldquo;Notes&rdquo;，然后在这两列下方是 &ldquo;Summary&rdquo;。</p>
<p>首先，创建一个名为 cornell-notes.css 的 CSS 文件，并添加以下样式代码：</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>.cornell<span style="color:#f92672">-</span>notes {
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  border: <span style="color:#ae81ff">1</span>px solid <span style="color:#960050;background-color:#1e0010">#</span>ccc;
</span></span><span style="display:flex;"><span>  padding: <span style="color:#ae81ff">20</span>px;
</span></span><span style="display:flex;"><span>  margin: <span style="color:#ae81ff">20</span>px;
</span></span><span style="display:flex;"><span>  display: flex;
</span></span><span style="display:flex;"><span>  flex<span style="color:#f92672">-</span>wrap: wrap;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.cues {
</span></span><span style="display:flex;"><span>  background<span style="color:#f92672">-</span>image: <span style="color:#a6e22e">url</span>(<span style="color:#960050;background-color:#1e0010">&#39;</span>icon2.svg<span style="color:#960050;background-color:#1e0010">&#39;</span>);
</span></span><span style="display:flex;"><span>  border<span style="color:#f92672">-</span>right: <span style="color:#ae81ff">1</span>px solid <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">080808</span>;
</span></span><span style="display:flex;"><span>  flex: <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>  padding<span style="color:#f92672">-</span>right: <span style="color:#ae81ff">20</span>px;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.notes {
</span></span><span style="display:flex;"><span>  background<span style="color:#f92672">-</span>image: <span style="color:#a6e22e">url</span>(<span style="color:#960050;background-color:#1e0010">&#39;</span>icon1.svg<span style="color:#960050;background-color:#1e0010">&#39;</span>);
</span></span><span style="display:flex;"><span>  border<span style="color:#f92672">-</span>left: <span style="color:#ae81ff">1</span>px solid <span style="color:#960050;background-color:#1e0010">#</span><span style="color:#ae81ff">080808</span>;
</span></span><span style="display:flex;"><span>  flex: <span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>  padding<span style="color:#f92672">-</span>left: <span style="color:#ae81ff">20</span>px;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.summary {
</span></span><span style="display:flex;"><span>  width: <span style="color:#ae81ff">100</span><span style="color:#f92672">%</span>;
</span></span><span style="display:flex;"><span>  clear: both; <span style="color:#75715e">/* 清除浮动，确保摘要部分在下方 */</span>
</span></span><span style="display:flex;"><span>  padding<span style="color:#f92672">-</span>top: <span style="color:#ae81ff">20</span>px;
</span></span><span style="display:flex;"><span>  background<span style="color:#f92672">-</span>image:<span style="color:#a6e22e">url</span>(<span style="color:#960050;background-color:#1e0010">&#39;</span>wwwatercolor.jpg<span style="color:#960050;background-color:#1e0010">&#39;</span>);
</span></span><span style="display:flex;"><span>  margin<span style="color:#f92672">-</span>top: <span style="color:#ae81ff">20</span>px;
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>在这个样式中，.cornell-notes 是整个康奈尔笔记的容器，我们使用 display: flex; 和 flex-wrap: wrap; 来创建一个 Flex 容器，允许子元素根据需要换行。.cues 和 .notes 分别设置为容器的子项，并通过 flex 属性来分配空间。.summary 部分使用 width: 100%; 来确保它在 .cues 和 .notes 下方显示，并使用 clear: both; 来清除之前的浮动。</p>
<p>此处分享一个免费的svg网站，<a href="https://fffuel.co/" rel="external" target="_blank">bbburst：</a>
<a href="#R-image-aece0777883af4df200d0b9bf1cd54b8" class="lightbox-link"><img alt="bbburst" class="lazy lightbox figure-image" loading="lazy" src="image.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-aece0777883af4df200d0b9bf1cd54b8"><img alt="bbburst" class="lazy lightbox lightbox-image" loading="lazy" src="image.png"></a>
在这个网站或许你可以找到适合你的背景图，用以装饰自己的康奈尔容器，此处的svg是放在css文件夹下的，所以是直接引用，如果你放在别的的放那么还请使用正确的的路径。</p>
<h3 id="在hugo配置中设置">在hugo配置中设置</h3>
<p>接下来，确保将 cornell-notes.css 文件放置在 Hugo 站点的 static/css 目录下。然后，在 Hugo 的配置文件 config.toml 中添加对 CSS 文件的引用：</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e"># config.toml
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>[Params]
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># 其他参数...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>[markup]
</span></span><span style="display:flex;"><span>  [markup.goldmark]
</span></span><span style="display:flex;"><span>    [markup.goldmark.renderer]
</span></span><span style="display:flex;"><span>      unsafe <span style="color:#f92672">=</span> true  <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#960050;background-color:#1e0010">允许在</span> Markdown <span style="color:#960050;background-color:#1e0010">中使用</span> HTML <span style="color:#960050;background-color:#1e0010">和</span> CSS</span></span></code></pre></div>
<p>如果使用的是code打开的项目，那么可以先在code内搜索上面的配置是否已添加，因为部分hugo主题原来就添加了这一配置。</p>
<h3 id="在markdown文档中引用">在markdown文档中引用</h3>
<p>在 Markdown 文件中，你可以这样使用这些类：</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>title: <span style="color:#e6db74">&#34;康奈尔笔记示例&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;</span>link rel<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span> href<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/css/cornell-notes.css&#34;</span><span style="color:#f92672">&gt;</span>  <span style="color:#f92672">&lt;</span>div class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;cornell-notes&#34;</span><span style="color:#f92672">&gt;</span>    <span style="color:#f92672">&lt;</span>div class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;cues&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## Cues
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">-</span> <span style="color:#960050;background-color:#1e0010">这里是关键词和提示。</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/</span>div<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;</span>div class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;notes&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## Notes
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#f92672">-</span> <span style="color:#960050;background-color:#1e0010">这里是详细的笔记内容。</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/</span>div<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;</span>div class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;summary&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## Summary
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> <span style="color:#f92672">-</span> <span style="color:#960050;background-color:#1e0010">这里是笔记的摘要。</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/</span>div<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/</span>div<span style="color:#f92672">&gt;</span></span></span></code></pre></div>
<p>确保在 Markdown 文件中添加 <link> 标签来引入 CSS 文件，并为每个部分使用相应的类。这样，当你构建并查看 Hugo 站点时，康奈尔笔记将以正确的样式显示，其中 &ldquo;Cues&rdquo; 在左侧，&ldquo;Notes&rdquo; 在右侧，&ldquo;Summary&rdquo; 在底部。</p>
</div>
<div class="summary">
<h2 id="summary">Summary</h2>
<p>在上面我们学习了如何自定义hugo中页面的输出格式，在引用hugo主题情况下，自定义自己的页面输出格式只需要三点，即创建css文件，在config配置文件中配置相关信息，在markdown中引用。其实我们可以拓展，如果你想创建属于自己的笔记你可以参照上面的方法自制简单的笔记，希望本期内容对你有所帮助。</p>
</div>
</div>
  <footer class="footline">
              <i class='fa-fw fas fa-calendar'></i> 2025年4月6日
  </footer>
</article>
<article class="default">
  <header class="headline">
<div class="R-taxonomy taxonomy-tags cstyle tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/tags/atomgit/">Atomgit</a></li>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/tags/gihub/">Gihub</a></li>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/tags/%E5%B7%A5%E5%85%B7/">工具</a></li>
  </ul>
</div>
  </header>

<h1 id="3github和atomgit的混合使用哪些是值得注意的">3.github和atomgit的混合使用，哪些是值得注意的？</h1>

<h2 id="一台电脑如何使用多个远程仓库">一台电脑如何使用多个远程仓库？</h2>
<ul>
<li>下载好git，并做好相关的配置</li>
<li>关联github仓库
<ul>
<li>创建github仓库</li>
<li>克隆仓库到本地</li>
</ul>
</li>
</ul>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code class="language-git" data-lang="git">  git clone &lt;你的远程仓库URL&gt;</code></pre></div>
<p>创建多个 SSH 密钥对涉及到在本地生成多个公钥和私钥文件，并将公钥添加到你想要访问的远程服务器上。以下是详细步骤：</p>
<p>打开终端：
打开你的终端（在 macOS 或 Linux 上）或 Git Bash（在 Windows 上）。</p>
<p>导航到 SSH 目录：
使用 cd 命令切换到你的 SSH 目录，通常是 ~/.ssh。</p>
<p><code>cd ~/.ssh</code>
生成新的 SSH 密钥对：
使用 ssh-keygen 命令生成新的密钥对。每次运行此命令时，你都可以指定不同的文件名，以便区分不同的密钥对。例如，为 GitHub 生成的密钥对可能命名为 id_rsa_github，为 GitLab 生成的密钥对可能命名为 id_rsa_gitlab。</p>
<p><code>ssh-keygen -t rsa -b 4096 -C &quot;your_email@example.com&quot; -f id_rsa_github</code>
重复上述步骤，为其他服务生成密钥对，只需更改文件名即可。例如：</p>
<p><code>ssh-keygen -t rsa -b 4096 -C &quot;another_email@example.com&quot; -f id_rsa_gitlab</code></p>
<p>-b是指密码的长度是4096，与加密有关，-f表示要创建的ssh有关文件名</p>
<p>在生成密钥时，系统会提示你输入一个文件名来保存新的密钥对。如果你直接按回车键，它将使用默认的文件名（如 id_rsa）。如果你想要为每个服务使用不同的文件名，确保在命令中指定 -f 选项后跟你想要的文件名。</p>
<p>将公钥添加到远程服务器：
生成密钥对后，你需要将公钥（文件名后缀为 .pub）添加到远程服务器的 SSH 密钥管理界面。例如，在 GitHub 上，你可以在 Settings &gt; SSH and GPG keys 部分添加新的公钥。</p>
<p>配置 SSH 配置文件：
为了确保 SSH 使用正确的密钥对连接到正确的服务器，你可以在 .ssh 目录下创建一个名为 config 的文件（如果该文件不存在的话），并为每个服务配置不同的设置。</p>
<p><code>touch ~/.ssh/config</code></p>
<p>然后编辑这个文件，添加以下内容：</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>Host github.com
</span></span><span style="display:flex;"><span>  User git
</span></span><span style="display:flex;"><span>  IdentityFile <span style="color:#f92672">~/</span>.ssh<span style="color:#f92672">/</span>id_rsa_github
</span></span><span style="display:flex;"><span>  IdentitiesOnly yes
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Host gitlab.com
</span></span><span style="display:flex;"><span>  User git
</span></span><span style="display:flex;"><span>  IdentityFile <span style="color:#f92672">~/</span>.ssh<span style="color:#f92672">/</span>id_rsa_gitlab
</span></span><span style="display:flex;"><span>  IdentitiesOnly yes</span></span></code></pre></div>
<p>这里的 Host 是你为每个服务设置的别名，User 是 Git 服务的默认用户名（通常是 git），IdentityFile 是你的私钥文件的路径。</p>
<p>测试 SSH 连接：
使用 ssh -T 命令测试与远程服务器的连接。例如：</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>ssh <span style="color:#f92672">-</span>T git<span style="color:#960050;background-color:#1e0010">@</span>github.com
</span></span><span style="display:flex;"><span>ssh <span style="color:#f92672">-</span>T git<span style="color:#960050;background-color:#1e0010">@</span>gitlab.com</span></span></code></pre></div>
<p>如果一切设置正确，你应该会看到一条欢迎消息，表明你已经成功通过 SSH 密钥验证。</p>
<h2 id="当我有连个github账户时当我用同一台电脑推送的时候如何区分是那个推送的">当我有连个github账户时，当我用同一台电脑推送的时候如何区分是那个推送的</h2>
<p><a href="https://blog.csdn.net/Kingson_Wu/article/details/38960559" rel="external" target="_blank">推荐文章</a></p>
<p>答案：</p>
<p>首先是克隆下来两个项目一个为test_A,一个为test_B，假设有一个账户是A，另一个是B，而且A账户的邮箱是设置为全局的，即用了这条命令：</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>git config <span style="color:#f92672">--</span>global user.name <span style="color:#e6db74">&#34;A&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>git config <span style="color:#f92672">--</span>global user.email A<span style="color:#960050;background-color:#1e0010">@</span>qq.com
</span></span><span style="display:flex;"><span><span style="color:#75715e">#假设这里的邮箱是QQ</span></span></span></code></pre></div>
<p>那么在在text_A中不作任何修改，在text_B中添加如下命令即可：</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>git config  user.name <span style="color:#e6db74">&#34;B&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>git config user.email B<span style="color:#960050;background-color:#1e0010">@</span>qq.com
</span></span><span style="display:flex;"><span><span style="color:#75715e">#假设这里的邮箱是QQ</span></span></span></code></pre></div>
<h2 id="遇到的一些问题">遇到的一些问题</h2>
<p>问题一</p>
<hr>
<p>解决Git上传代码error: failed to push some refs to ‘xxx‘hint:(e.g., ‘git pull &hellip;‘) before pushing again错误</p>
<hr>
<p><a href="https://blog.csdn.net/qq_43265673/article/details/107392047" rel="external" target="_blank">推荐文章</a></p>
<p>问题二</p>
<hr>
<p>【Git】错误：权限被拒绝（公钥）(Permission denied (publickey).)</p>
<hr>
<p><a href="https://blog.csdn.net/weixin_42282187/article/details/124820546?spm=1001.2101.3001.6650.2&utm_medium=distribute.pc_relevant.none-task-blog-2%25!E(MISSING)default%25!E(MISSING)CTRLIST%25!E(MISSING)Rate-2-124820546-blog-100894172.235%25!E(MISSING)v43%25!E(MISSING)pc_blog_bottom_relevance_base8&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%25!E(MISSING)default%25!E(MISSING)CTRLIST%25!E(MISSING)Rate-2-124820546-blog-100894172.235%25!E(MISSING)v43%25!E(MISSING)pc_blog_bottom_relevance_base8&utm_relevant_index=5" rel="external" target="_blank">推荐文章</a>2)</p>
<p>问题三</p>
<hr>
<p>解决Git上传代码error: failed to push some refs to ‘xxx‘hint:(e.g., ‘git pull &hellip;‘) before pushing again错误</p>
<hr>
<p><a href="https://blog.csdn.net/qq_43265673/article/details/107392047" rel="external" target="_blank">推荐文章</a></p>
<div class="box attachments cstyle default" style="--VARIABLE-BOX-color: fuchsia;">
  <div class="box-label"><i class="fab fa-hackerrank"></i> 附件</div>
  <ul class="box-content attachments-files">
  </ul>
</div>

  <footer class="footline">
              <i class='fa-fw fas fa-calendar'></i> 2025年4月6日
<div class="R-taxonomy taxonomy-categories cstyle" title="类别" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/categories/%E5%B7%A5%E5%85%B7%E6%8E%A8%E8%8D%90/">工具推荐</a></li>
  </ul>
</div>
  </footer>
</article>
<article class="default">
  <header class="headline">
<div class="R-taxonomy taxonomy-tags cstyle tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/tags/github/">Github</a></li>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/tags/%E5%B7%A5%E5%85%B7/">工具</a></li>
  </ul>
</div>
  </header>

<h1 id="2git与github的使用">2.git与github的使用</h1>

<h2 id="网页链接">网页链接</h2>
<p><a href="https://www.cnblogs.com/tntblog/p/13715084.html" rel="external" target="_blank">原文章链接</a></p>
<h2 id="1使用git-commi--m-时报错-your-branch-is-up-to-date-with-originmaster">1、使用git commi -m &ldquo;……&ldquo;时报错： Your branch is up to date with ‘origin/master‘</h2>
<p>今天在提交项目的时候报了这个错误，在网上查了解决办法，有的说创建新的分支可以解决，但我的不行。</p>
<p>最后我的解决办法是先退出git base here，再重新进入，下面是具体步骤：</p>
<ul>
<li>先使用<code>git add .</code>；</li>
<li>接着使用<code>git status -s</code>查看我更改的文件，也是我要推送的文件，如果前面的有M和??，那么久重新更新文件，然后重复上面的步骤；</li>
<li>发现前面的M是绿色的后就可以使用<code>git commit -m &quot;文件备注&quot;</code>；</li>
<li>然后推送就可以了<code>git push origin main</code>。</li>
</ul>
<h2 id="androidstudio中的grable下载很慢如何解决">AndroidStudio中的grable下载很慢，如何解决？</h2>
<p><a href="https://blog.csdn.net/BG1230521/article/details/136605382" rel="external" target="_blank">参考地址</a></p>
<p>这里的关键命令是git status -s，我现在搞不懂这个错误产生的原因……</p>
<h2 id="虚拟机连接不上网络没有分配ens33">虚拟机连接不上网络，没有分配ENS33</h2>
<p><a href="https://blog.csdn.net/qq_44853430/article/details/109974779" rel="external" target="_blank">参考链接</a></p>
<h2 id="浏览器突然无法访问某些网站之前可以突然不行">浏览器突然无法访问某些网站，之前可以突然不行。</h2>
<p>解决办法：
<a href="#R-image-bcf37720918fcaec8c8a525b38e999b6" class="lightbox-link"><img alt="11" class="lazy lightbox figure-image" loading="lazy" src="../Wungmeisilong/hugoBlog_pub.git/log/2.git%E4%B8%8Egithub%E7%9A%84%E4%BD%BF%E7%94%A8/image.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-bcf37720918fcaec8c8a525b38e999b6"><img alt="11" class="lazy lightbox lightbox-image" loading="lazy" src="../Wungmeisilong/hugoBlog_pub.git/log/2.git%E4%B8%8Egithub%E7%9A%84%E4%BD%BF%E7%94%A8/image.png"></a></p>
<p>在浏览器中关闭，使用安全的 DNS 指定如何查找网站的网络地址，然后就可以访问了，原因我还没弄清楚。</p>
<h2 id="androidstudio中为什么不建议使用case-ridgenerate判断而是使用ifvgetid--ridgenerate">AndroidStudio中为什么不建议使用<code>case R.id.generate</code>判断，而是使用<code>if(v.getId() == R.id.generate)</code>？</h2>
<p>1.当使用Switch语句写如下代码时，</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">switch</span> (v.<span style="color:#a6e22e">getId</span>()){
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">generate</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">case</span> R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">add</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>        }</span></span></code></pre></div>
<p>（红色表示报错）如果报错android studio报错constant expression required，
可以把Switch语句换成if-else语句即</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>If<span style="color:#960050;background-color:#1e0010">（</span>v.<span style="color:#a6e22e">getId</span>() <span style="color:#f92672">==</span> R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">generate</span><span style="color:#960050;background-color:#1e0010">）</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">……</span>
</span></span><span style="display:flex;"><span>}<span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span><span style="color:#960050;background-color:#1e0010">（</span>v.<span style="color:#a6e22e">getId</span>() <span style="color:#f92672">==</span> R.<span style="color:#a6e22e">id</span>.<span style="color:#a6e22e">add</span><span style="color:#960050;background-color:#1e0010">）</span>{
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">……</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>这样就可以了。来源以及具体原因：
<a href="https://blog.csdn.net/weixin_43912621/article/details/106178388" rel="external" target="_blank">https://blog.csdn.net/weixin_43912621/article/details/106178388</a></p>
<div class="box attachments cstyle default" style="--VARIABLE-BOX-color: fuchsia;">
  <div class="box-label"><i class="fab fa-hackerrank"></i> 附件</div>
  <ul class="box-content attachments-files">
  </ul>
</div>

  <footer class="footline">
              <i class='fa-fw fas fa-calendar'></i> 2025年4月6日
<div class="R-taxonomy taxonomy-categories cstyle" title="类别" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/categories/%E5%B7%A5%E5%85%B7%E6%8E%A8%E8%8D%90/">工具推荐</a></li>
  </ul>
</div>
  </footer>
</article>
<article class="default">
  <header class="headline">
<div class="R-taxonomy taxonomy-tags cstyle tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/tags/hugo%E4%B8%BB%E9%A2%98%E5%8D%9A%E5%AE%A2/">Hugo主题博客</a></li>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/tags/%E5%89%8D%E7%AB%AF/">前端</a></li>
  </ul>
</div>
  </header>

<h1 id="1博客优化笔记">1.博客优化笔记</h1>

<h2 id="代码分制表">代码分制表</h2>
<p>以<code>&lt; tabs title=&quot;file name&quot; &gt;，&lt; /tabs &gt;</code>结尾；
然后里面写以<code>% tab title=&quot;code name&quot; style=&quot;info&quot; color=&quot;blue &quot;  %，% /tab %</code>结尾
他们都需要用<code>{{}}</code>括起来
<div class="tab-panel" data-tab-group="shortcode-parameter">
  <div class="tab-nav">
    <div class="tab-nav-title">&#8203;</div>
    <button
      data-tab-item="代码"
      class="tab-nav-button tab-panel-style cstyle initial active" tabindex="-1"
      onclick="switchTab('shortcode-parameter','代码')"
    >
      <span class="tab-nav-text">代码</span>
    </button>
  </div>
  <div class="tab-content-container">
    <div
      data-tab-item="代码"
      class="tab-content tab-panel-style cstyle initial active">
      <div class="tab-content-text">
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>{{&lt; <span style="color:#a6e22e">tabs</span> <span style="color:#a6e22e">title</span>=<span style="color:#e6db74">&#34;hello.&#34;</span> &gt;}}
</span></span><span style="display:flex;"><span><span style="color:#75715e">//代码块一</span>
</span></span><span style="display:flex;"><span>{{<span style="color:#f92672">%</span> <span style="color:#a6e22e">tab</span> <span style="color:#a6e22e">title</span>=<span style="color:#e6db74">&#34;py&#34;</span> <span style="color:#f92672">%</span>}}
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">```markdown
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    **这里写代码**
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    ```</span>
</span></span><span style="display:flex;"><span>{{<span style="color:#f92672">%</span> <span style="color:#f92672">/</span><span style="color:#a6e22e">tab</span> <span style="color:#f92672">%</span>}}
</span></span><span style="display:flex;"><span><span style="color:#75715e">//代码块二</span>
</span></span><span style="display:flex;"><span>{{<span style="color:#f92672">%</span> <span style="color:#a6e22e">tab</span> <span style="color:#a6e22e">title</span>=<span style="color:#e6db74">&#34;sh&#34;</span> <span style="color:#f92672">%</span>}}
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">```markdown
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    **这里写代码**
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    ```</span>
</span></span><span style="display:flex;"><span>{{<span style="color:#f92672">%</span> <span style="color:#f92672">/</span><span style="color:#a6e22e">tab</span> <span style="color:#f92672">%</span>}}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{{&lt; <span style="color:#f92672">/</span><span style="color:#a6e22e">tabs</span> &gt;}}</span></span></code></pre></div>
      </div>
    </div>
  </div>
</div></p>
<h2 id="显示附件文件">显示附件文件</h2>
<p>在双花括号里写：<code>attachments color=&quot;fuchsia&quot; icon=&quot;fab fa-hackerrank&quot;</code>，即可，</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>    {{<span style="color:#f92672">%</span> <span style="color:#a6e22e">attachments</span> <span style="color:#a6e22e">color</span>=<span style="color:#e6db74">&#34;fuchsia&#34;</span> <span style="color:#a6e22e">icon</span>=<span style="color:#e6db74">&#34;fab fa-hackerrank&#34;</span> <span style="color:#f92672">%</span>}}</span></span></code></pre></div>
<p>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;分割线</p>
<p>不论是创建首页页面，还是左边框的选项，归根结底它们都是“目录”，从根上说，你需要创建一个目录然后在目录里面创建一个.md文件来装这个目录或说显示这个目录的内容。</p>
<h2 id="首页的创建">首页的创建</h2>
<p>创建首页使用了命令</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>    hugo new <span style="color:#f92672">--</span>kind home _index.md</span></span></code></pre></div>
<p>而后产生的页面，它自动生成头文件</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>    <span style="color:#f92672">+++</span>
</span></span><span style="display:flex;"><span>    archetype <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;home&#34;</span>
</span></span><span style="display:flex;"><span>    title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">+++</span></span></span></code></pre></div>
<p>值得注意的是，如果你用命令</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>    hugo new site myblog</span></span></code></pre></div>
<p>创建了一个myblog的目录，那么你在里面操作<strong>hugo new &ndash;kind home _index.md</strong>的时候,用于显示首页的文件**_index.md**会自动产生在content文件里。</p>
<h2 id="创建章节的方法">创建章节的方法</h2>
<p>使用命令：</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>    hugo new <span style="color:#f92672">&lt;</span>chapter<span style="color:#f92672">&gt;/&lt;</span>name<span style="color:#f92672">&gt;/</span>_index.md</span></span></code></pre></div>
<p>或者：</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>    hugo new <span style="color:#f92672">&lt;</span>chapter<span style="color:#f92672">&gt;/&lt;</span>name<span style="color:#f92672">&gt;</span>.md</span></span></code></pre></div>
<p>在创建章节的时候需要加上<code>alwaysopen = false</code>,如下面的例子：</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>        <span style="color:#f92672">+++</span>
</span></span><span style="display:flex;"><span>        alwaysopen <span style="color:#f92672">=</span> false
</span></span><span style="display:flex;"><span>        archetype <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;chapter&#34;</span>
</span></span><span style="display:flex;"><span>        title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;2.AndroidStudio&#34;</span>
</span></span><span style="display:flex;"><span>        weight <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">+++</span></span></span></code></pre></div>
<h2 id="在标题前面显示图标">在标题前面显示图标</h2>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span>    <span style="color:#f92672">+++</span>
</span></span><span style="display:flex;"><span>    menuPre <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&lt;i class=&#39;fab fa-github&#39;&gt;&lt;/i&gt; &#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">+++</span></span></span></code></pre></div>
<p>添加这个后的效果如下：</p>
<p><a href="#R-image-e9c604f9964cc9b75c50cc98a6ec151b" class="lightbox-link"><img alt="效果图" class="lazy lightbox figure-image" loading="lazy" src="../Wungmeisilong/hugoBlog_pub.git/log/1.%E5%8D%9A%E5%AE%A2%E4%BC%98%E5%8C%96%E7%AC%94%E8%AE%B0/image.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e9c604f9964cc9b75c50cc98a6ec151b"><img alt="效果图" class="lazy lightbox lightbox-image" loading="lazy" src="../Wungmeisilong/hugoBlog_pub.git/log/1.%E5%8D%9A%E5%AE%A2%E4%BC%98%E5%8C%96%E7%AC%94%E8%AE%B0/image.png"></a></p>
<!-- 导航栏 -->
<nav class="main-nav">
  <div class="container">
    <a href="../" class="logo">TechMind</a>
    <ul class="nav-links">
      <li><a href="../">首页</a></li>
      <li><a href="../tech">技术文章</a></li>
      <li><a href="../novel">小说</a></li>
    </ul>
    <div class="search-box">
      <form action="../search.html" method="get">
        <div class="searchform">
          <label class="a11y-only" for="R-search-by-detail">Search</label>
          <input data-search-input="" id="R-search-by-detail" class="search-by" name="search-by" type="search" placeholder="搜索..." _mstplaceholder="99723">
          <span class="btn cstyle interactive secondary"><button onclick="" type="submit"><i class="fa-fw fas fa-search"></i> <span class="title">搜索</span></button></span>
        </div>
      </form> 
    </div>
  </div>
</nav>
<!-- 主体内容 -->
<main class="container">
  <!-- 技术文章区 -->
  <section class="tech-articles">
  <h2>最新技术文章</h2>
  <article class="post-card">
    {{ partial "post-card.html" (dict "path" "log/7.初次安装AD需要做哪些设置？.md") }}
  </article>
  <article class="post-card">
    <div class="post-image">
      <img src="https://picsum.photos/1200/800/?technology,server" alt="物联网安全架构">
    </div>
    <h3>#13 物联网网络安全论</h3>
    <p>探讨边缘计算环境下的安全防护体系...</p>
    <div class="meta">发布于 2024-03-12 | 分类：网络安全</div>
  </article>
</section>
  <!-- 小说专区 -->
  <aside class="novel-preview">
    <h2>连载小说</h2>
    <div class="chapter-preview">
      <h3>#8 桑叶白鸟卷</h3>
      <p>「殿下请看，这雕花窗棂的纹路暗合奇门遁甲之术...」</p>
      <p class="excerpt">太傅李大人手持竹简，青石地板上的光影随着日晷缓缓移动...</p>
      <a href="../chapter/8" class="read-more">继续阅读 →</a>
    </div>
  </aside>
</main>
<!-- 底部 -->
<footer class="site-footer">
  <div class="container">
    <div class="footer-links">
      <a href="#">关于我们</a> |
      <a href="#">隐私政策</a> |
      <a href="#">RSS订阅</a>
    </div>
    <p class="copyright">&copy; 2024 TechMind. 保留所有权利.</p>
  </div>
</footer>
<style>
  /* 基础样式 */
  :root {
    --primary-color: #2c3e50;
    --light-bg: #f8f9fa;
  }
<p>body {
font-family: &lsquo;Open Sans&rsquo;, sans-serif;
line-height: 1.6;
color: #34495e;
margin: 0;
}</p>
<p>.main-nav {
background: var(&ndash;primary-color);
padding: 2rem 0;
}</p>
<p>.nav-links {
display: flex;
gap: 2rem;
list-style: none;
padding: 0;
margin: 0;
}</p>
<p>.post-card {
background: white;
padding: 2rem;
margin-bottom: 2rem;
border-radius: 8px;
box-shadow: 0 2px 15px rgba(0,0,0,0.1);
}</p>
<p>.novel-preview {
background: var(&ndash;light-bg);
padding: 2rem;
border-radius: 8px;
}</p>
<p>.read-more {
color: var(&ndash;primary-color);
text-decoration: none;
font-weight: 500;
}</p>
<p>@media (min-width: 768px) {
.container {
display: grid;
grid-template-columns: 3fr 1fr;
gap: 3rem;
}
}
/* 新增图片样式 */
.post-image {
width: 100%;
border-radius: 8px;
overflow: hidden;
margin-bottom: 1.5rem;
}</p>
<p>.post-image img {
width: 100%;
height: 200px;
object-fit: cover;
transition: transform 0.3s ease;
}</p>
<p>.post-image:hover img {
transform: scale(1.02);
}</p>
<p>/* 响应式调整 */
@media (max-width: 768px) {
.post-image img {
height: 150px;
}
}
</style></p>
<div class="box attachments cstyle default" style="--VARIABLE-BOX-color: fuchsia;">
  <div class="box-label"><i class="fab fa-hackerrank"></i> 附件</div>
  <ul class="box-content attachments-files">
  </ul>
</div>

  <footer class="footline">
              <i class='fa-fw fas fa-calendar'></i> 2025年4月6日
<div class="R-taxonomy taxonomy-categories cstyle" title="类别" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/categories/%E8%B8%A9%E5%9D%91%E6%97%A5%E8%AE%B0/">踩坑日记</a></li>
  </ul>
</div>
  </footer>
</article>
<article class="default">
  <header class="headline">
<div class="R-taxonomy taxonomy-tags cstyle tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/tags/ad%E8%AE%BE%E7%BD%AE/">AD设置</a></li>
  </ul>
</div>
  </header>

<h1 id="7初次安装ad需要做哪些设置">7.初次安装AD需要做哪些设置？</h1>

<h2 id="设置自动保存">设置自动保存</h2>
<p>打开程序点击系统设置，如下图：</p>
<p><a href="#R-image-5eeabb2d2b3c309d02191975cf21bd6c" class="lightbox-link"><img alt="系统设置" class="lazy lightbox figure-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/c1fb1a624013dcb464404fecc119f9a2.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5eeabb2d2b3c309d02191975cf21bd6c"><img alt="系统设置" class="lazy lightbox lightbox-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/c1fb1a624013dcb464404fecc119f9a2.png"></a></p>
<p>按照下图步骤设置自动保存，每10分钟保存一次（你也可以设置成其他的，但不建议设置太小或太大比如1分钟或者30分钟）</p>
<p><a href="#R-image-f17ac37483d63da2f8aeed7128f71b7b" class="lightbox-link"><img alt="设置自动保存" class="lazy lightbox figure-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/7d36887f3eb34181db45fe5ef9ec1f26.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f17ac37483d63da2f8aeed7128f71b7b"><img alt="设置自动保存" class="lazy lightbox lightbox-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/7d36887f3eb34181db45fe5ef9ec1f26.png"></a></p>
<h2 id="设置单一表示负信号">设置单一&rsquo;'表示负信号</h2>
<p>按照下图设置</p>
<p><a href="#R-image-71edecd3135931ed39b42a45a6e98f39" class="lightbox-link"><img alt="在这里插入图片描述" class="lazy lightbox figure-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/5726209f81f50a65ab51737433722a1a.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-71edecd3135931ed39b42a45a6e98f39"><img alt="在这里插入图片描述" class="lazy lightbox lightbox-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/5726209f81f50a65ab51737433722a1a.png"></a></p>
<p><a href="#R-image-ca77cc9583f9aede4e344d6999ba2b28" class="lightbox-link"><img alt="负信号表示" class="lazy lightbox figure-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/e698a4aa176f2b1fb1fd705ea6f05e5a.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-ca77cc9583f9aede4e344d6999ba2b28"><img alt="负信号表示" class="lazy lightbox lightbox-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/e698a4aa176f2b1fb1fd705ea6f05e5a.png"></a></p>
<p><a href="#R-image-3713beee37805253e13bdb1026e86e4f" class="lightbox-link"><img alt="最终效果" class="lazy lightbox figure-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/54ca63f1224388be7413e81a5918d9c8.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-3713beee37805253e13bdb1026e86e4f"><img alt="最终效果" class="lazy lightbox lightbox-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/54ca63f1224388be7413e81a5918d9c8.png"></a></p>
<p><a href="#R-image-cfd379ceb0cc069522b64b9b8ba2cb02" class="lightbox-link"><img alt="设置复制自动增加" class="lazy lightbox figure-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/73b933c047333cee6cd893654cc93637.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-cfd379ceb0cc069522b64b9b8ba2cb02"><img alt="设置复制自动增加" class="lazy lightbox lightbox-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/73b933c047333cee6cd893654cc93637.png"></a></p>
<p><a href="#R-image-b7bd36a991d13fbaa2a9c23a0e91972f" class="lightbox-link"><img alt="复制自动增加" class="lazy lightbox figure-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/c4ac8007871184e28e67455d4fa9c0b7.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-b7bd36a991d13fbaa2a9c23a0e91972f"><img alt="复制自动增加" class="lazy lightbox lightbox-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/c4ac8007871184e28e67455d4fa9c0b7.png"></a></p>
<p><a href="#R-image-cc61976fa364a1436dc7044351767ecc" class="lightbox-link"><img alt="复制不自动增加" class="lazy lightbox figure-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/fc222b1f998436fbea98ed4feec6499c.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-cc61976fa364a1436dc7044351767ecc"><img alt="复制不自动增加" class="lazy lightbox lightbox-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/fc222b1f998436fbea98ed4feec6499c.png"></a></p>
<h1 id="设置显示对话框">设置显示对话框</h1>
<p>我设置前</p>
<p><a href="#R-image-93e44196912e84dde13769364b25ab20" class="lightbox-link"><img alt="名字重叠" class="lazy lightbox figure-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/3f34f4a98985cc17cf8898e517859d88.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-93e44196912e84dde13769364b25ab20"><img alt="名字重叠" class="lazy lightbox lightbox-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/3f34f4a98985cc17cf8898e517859d88.png"></a></p>
<p><a href="#R-image-4f855c478e831ead3b8808d053a9cd6c" class="lightbox-link"><img alt="未设置前" class="lazy lightbox figure-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/31b40b7e9edd5a38004086708a020ae5.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-4f855c478e831ead3b8808d053a9cd6c"><img alt="未设置前" class="lazy lightbox lightbox-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/31b40b7e9edd5a38004086708a020ae5.png"></a></p>
<p>当把上面的打钩后</p>
<p><a href="#R-image-ac5862f5123b695179b1809ae89a645a" class="lightbox-link"><img alt="设置后" class="lazy lightbox figure-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/19dc26c7d13732b02714687ca50bba02.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-ac5862f5123b695179b1809ae89a645a"><img alt="设置后" class="lazy lightbox lightbox-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/19dc26c7d13732b02714687ca50bba02.png"></a></p>
<p><a href="#R-image-a7037661f89a4f2ebf185dbd2b4e821c" class="lightbox-link"><img alt="在这里插入图片描述" class="lazy lightbox figure-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/dd75ba2048f4f2507622006608cd62de.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a7037661f89a4f2ebf185dbd2b4e821c"><img alt="在这里插入图片描述" class="lazy lightbox lightbox-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/dd75ba2048f4f2507622006608cd62de.png"></a></p>
<p>[外链图片转存中&hellip;(img-ZngLHveL-1719559556141)]</p>
<p><a href="#R-image-38b7c067b4cef2fab6d6d590a99ee683" class="lightbox-link"><img alt="在这里插入图片描述" class="lazy lightbox figure-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/f410e5cecc9ae34ac16a2ad647c6aab5.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-38b7c067b4cef2fab6d6d590a99ee683"><img alt="在这里插入图片描述" class="lazy lightbox lightbox-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/f410e5cecc9ae34ac16a2ad647c6aab5.png"></a></p>
<p><a href="#R-image-041b65a137792f13435aa41c310e712d" class="lightbox-link"><img alt="在这里插入图片描述" class="lazy lightbox figure-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/8d80e72f3123a7172212fcc06338a61c.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-041b65a137792f13435aa41c310e712d"><img alt="在这里插入图片描述" class="lazy lightbox lightbox-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/8d80e72f3123a7172212fcc06338a61c.png"></a></p>
<p><a href="#R-image-8eb9bef9213bea61d40957edf96d6cb3" class="lightbox-link"><img alt="在这里插入图片描述" class="lazy lightbox figure-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/c02b4c0b77a6dbd581238fc65b86a6f7.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-8eb9bef9213bea61d40957edf96d6cb3"><img alt="在这里插入图片描述" class="lazy lightbox lightbox-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/c02b4c0b77a6dbd581238fc65b86a6f7.png"></a></p>
<p>按住shift+h可以显示和关闭</p>
<p>[外链图片转存中&hellip;(img-bxjUhYCS-1719559556142)]</p>
<p><a href="#R-image-eaceeac753f0cca69b1670c0d4ad3e0b" class="lightbox-link"><img alt="在这里插入图片描述" class="lazy lightbox figure-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/83e54a74166c16385873c0bb590d3057.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-eaceeac753f0cca69b1670c0d4ad3e0b"><img alt="在这里插入图片描述" class="lazy lightbox lightbox-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/83e54a74166c16385873c0bb590d3057.png"></a></p>
<p>[外链图片转存中&hellip;(img-qKvH9IRn-1719559556142)]
<a href="#R-image-8a4e080734cfc68f1188a42411c81f1b" class="lightbox-link"><img alt="在这里插入图片描述" class="lazy lightbox figure-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/c61197f3e47d35ecb8f046a70c4eeaad.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-8a4e080734cfc68f1188a42411c81f1b"><img alt="在这里插入图片描述" class="lazy lightbox lightbox-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/c61197f3e47d35ecb8f046a70c4eeaad.png"></a></p>
<p>[外链图片转存中&hellip;(img-HAD9BmgV-1719559556142)]</p>
<p><a href="#R-image-dc5503d4a254509fb837384042d1a211" class="lightbox-link"><img alt="在这里插入图片描述" class="lazy lightbox figure-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/ab22d2cfb50206497eac47abce62778d.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-dc5503d4a254509fb837384042d1a211"><img alt="在这里插入图片描述" class="lazy lightbox lightbox-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/ab22d2cfb50206497eac47abce62778d.png"></a>
<a href="#R-image-5215c396e2893ad311896fd88a4f7469" class="lightbox-link"><img alt="在这里插入图片描述" class="lazy lightbox figure-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/c6ad53b8e1917c275f6b13a3ea5bd4a5.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-5215c396e2893ad311896fd88a4f7469"><img alt="在这里插入图片描述" class="lazy lightbox lightbox-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/c6ad53b8e1917c275f6b13a3ea5bd4a5.png"></a></p>
<p><a href="#R-image-2f75618241ae679654b1a988c8f98e65" class="lightbox-link"><img alt="在这里插入图片描述" class="lazy lightbox figure-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/bef0a3910f44c66d05a4b511c0b5468c.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-2f75618241ae679654b1a988c8f98e65"><img alt="在这里插入图片描述" class="lazy lightbox lightbox-image" loading="lazy" src="https://img-blog.csdnimg.cn/img_convert/bef0a3910f44c66d05a4b511c0b5468c.png"></a></p>

  <footer class="footline">
              <i class='fa-fw fas fa-calendar'></i> 2024年6月28日
<div class="R-taxonomy taxonomy-categories cstyle" title="类别" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/categories/%E8%87%AA%E5%AD%A6%E8%AF%BE%E7%A8%8B/">自学课程</a></li>
  </ul>
</div>
  </footer>
</article>
<article class="default">
  <header class="headline">
<div class="R-taxonomy taxonomy-tags cstyle tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/tags/arkts/">ArkTS</a></li>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/tags/harmonyos/">HarmonyOS</a></li>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/tags/openharmony/">OpenHarmony</a></li>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/tags/%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96/">云端一体化</a></li>
  </ul>
</div>
  </header>

<h1 id="6云端一体化的环境变量问题">6.云端一体化的环境变量问题</h1>

<p>参数<strong>context</strong> 与环境变量有关，不管是系统还是用户自定义的都用这个来获取，获取方式：context.env</p>
<ul>
<li>先部署云函数到远端，然后在去远端添加环境变量，然后在本地运行虚拟机查看。</li>
</ul>
<p>负载均衡的四种方式</p>
<ul>
<li>随机</li>
<li>轮询</li>
<li>最少连接数</li>
<li>最短响应时间</li>
</ul>
<p>延迟时长的重试策略</p>
<ul>
<li>zero:一旦云函数调用失败，则调用，中间不等待</li>
<li>constant：调用失败等一段时间</li>
<li>jittered:调用失败等一段时间，再次调用，如果失败等待时间以指数增长</li>
</ul>
<p>熔断</p>
<p>设置一定的条件，满足条件后会执行熔断。熔断后云函数不在提供服务。</p>
<p><a href="#R-image-43d3c26ebbb766416e2683756fad9937" class="lightbox-link"><img alt="e" class="lazy lightbox figure-image" loading="lazy" src="../Wungmeisilong/hugoBlog_pub.git/log/6.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E7%9A%84%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%97%AE%E9%A2%98/log.JPG" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-43d3c26ebbb766416e2683756fad9937"><img alt="e" class="lazy lightbox lightbox-image" loading="lazy" src="../Wungmeisilong/hugoBlog_pub.git/log/6.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E7%9A%84%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%97%AE%E9%A2%98/log.JPG"></a></p>
<div class="box attachments cstyle default" style="--VARIABLE-BOX-color: fuchsia;">
  <div class="box-label"><i class="fab fa-hackerrank"></i> 附件</div>
  <ul class="box-content attachments-files">
  </ul>
</div>

  <footer class="footline">
              <i class='fa-fw fas fa-calendar'></i> 2024年3月23日
<div class="R-taxonomy taxonomy-categories cstyle" title="类别" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/categories/%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/">应用开发</a></li>
  </ul>
</div>
  </footer>
</article>
<article class="default">
  <header class="headline">
<div class="R-taxonomy taxonomy-tags cstyle tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/tags/arkts/">ArkTS</a></li>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/tags/harmonyos/">HarmonyOS</a></li>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/tags/openharmony/">OpenHarmony</a></li>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/tags/%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96/">云端一体化</a></li>
  </ul>
</div>
  </header>

<h1 id="5云端一体化如何查看云函数日志">5.云端一体化如何查看云函数日志？</h1>

<p>调用云函数的时候我们总有输入输出结果不符合自己预期的时候，这个时候查看日志很重要！！在云端一体化开发过程中，我们可以通过下面的方式解决这一问题：</p>
<p>首先参数event的输出以JSON格式输出，这样方便阅读，下面有一段代码，</p>
<p>云函数代码如下：</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">stringify</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;querystring&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">myHandler</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">event</span>, <span style="color:#a6e22e">context</span>, <span style="color:#a6e22e">callback</span>, <span style="color:#a6e22e">logger</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">logger</span>.<span style="color:#a6e22e">info</span>(<span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">event</span>));
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">name</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">callback</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">code</span>: <span style="color:#66d9ef">200</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">`Hello </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">name</span><span style="color:#e6db74">}</span><span style="color:#e6db74">.`</span>
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> { <span style="color:#a6e22e">myHandler</span> };</span></span></code></pre></div>
<p>获取信息的ets文件如下：</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">cloud</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@hw-agconnect/cloud&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">@Entry</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">@Component</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">struct</span> <span style="color:#a6e22e">MyIndex</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">message</span>: <span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">name</span>:<span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">build() {</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Row() {</span>
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">Column() {</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">TextInput</span>({<span style="color:#a6e22e">placeholder</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;请输入姓名&#39;</span>})
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">onChange</span>(<span style="color:#a6e22e">value</span> <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">value</span>
</span></span><span style="display:flex;"><span>          })
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Button</span>(<span style="color:#e6db74">&#39;使用云端一体化&#39;</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">fontSize</span>(<span style="color:#ae81ff">20</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">onClick</span>(<span style="color:#66d9ef">async</span> ()<span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">cloud</span>.<span style="color:#a6e22e">callFunction</span>({
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;login&#39;</span>,<span style="color:#75715e">//云函数的名字
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>              <span style="color:#a6e22e">version</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;$latest&#39;</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">params</span><span style="color:#f92672">:</span>{<span style="color:#a6e22e">name</span>:<span style="color:#66d9ef">this.name</span>}
</span></span><span style="display:flex;"><span>            })
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">message</span><span style="color:#f92672">=</span><span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">getValue</span>().<span style="color:#a6e22e">message</span>
</span></span><span style="display:flex;"><span>          })
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Text</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">message</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">fontSize</span>(<span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">fontWeight</span>(<span style="color:#a6e22e">FontWeight</span>.<span style="color:#a6e22e">Bold</span>)
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">height</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p><strong>function函数的说明：</strong></p>
<ul>
<li>触发条件：
<ul>
<li>HTTP请求，</li>
<li>云数据库插入，</li>
<li>云存储</li>
</ul>
</li>
<li>参数含义：
<ul>
<li>输入信息（），</li>
<li>执行时上下文信息（环境变量），</li>
<li>输出（返回结果给调用者），</li>
<li>记录日志（）</li>
</ul>
</li>
</ul>
<p>此处做了这样的处理使得日志输出以JSON格式输出：</p>
<hr>
<pre><code>logger.info(JSON.stringify(event))
</code></pre>
<hr>
<p>当遇到问题时，去官方的开发论坛搜索相关内容，
此处我想实现输入一个名字，然后让云端函数以不同的方式输出，比如：</p>
<hr>
<p>你好，张三</p>
<p>你好，李四</p>
<hr>
<p>但是现在输出的是：<strong>你好，%&amp;*%%</strong></p>
<p>解决办法：</p>
<p><a href="https://developer.huawei.com/consumer/cn/doc/AppGallery-connect-Guides/agc-cloudfunction-appx-event-0000001620581529" rel="external" target="_blank">查看event参数说明</a></p>
<p><a href="#R-image-a2bebb1352b80565b5633bc9bb85b1b5" class="lightbox-link"><img alt="jietu1" class="lazy lightbox figure-image" loading="lazy" src="../Wungmeisilong/hugoBlog_pub.git/log/5.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/image.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a2bebb1352b80565b5633bc9bb85b1b5"><img alt="jietu1" class="lazy lightbox lightbox-image" loading="lazy" src="../Wungmeisilong/hugoBlog_pub.git/log/5.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/image.png"></a></p>
<p>再去CAG官网选择云监控&mdash;&gt;日志服务</p>
<p><a href="#R-image-a197e9b2d2c0941c5e8219e9feacd364" class="lightbox-link"><img alt="截图2" class="lazy lightbox figure-image" loading="lazy" src="../Wungmeisilong/hugoBlog_pub.git/log/5.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/image-1.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-a197e9b2d2c0941c5e8219e9feacd364"><img alt="截图2" class="lazy lightbox lightbox-image" loading="lazy" src="../Wungmeisilong/hugoBlog_pub.git/log/5.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/image-1.png"></a></p>
<p>然后复制右边的内容,放到一个json文件夹，用编译器（比如VScode）打开，并调整格式(如果用的是VScode，请使用<strong>shift+alt+F</strong>调整json格式)如下：</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code class="language-jsonyouweishengke" data-lang="jsonyouweishengke">{
    &#34;path&#34;: &#34;login-$latest&#34;,
    &#34;httpMethod&#34;: &#34;POST&#34;,

    &#34;headers&#34;: 
    {
        &#34;user-agent&#34;: &#34;libcurl-agent/1.0&#34;,
        &#34;x-forwarded-for&#34;: &#34;115.46.239.151, 10.135.135.154, 10.134.64.11&#34;,
        &#34;x-forwarded-port&#34;: &#34;443&#34;,
        &#34;accept&#34;: &#34;*/*&#34;,
        &#34;accept-encoding&#34;: &#34;gzip&#34;,
        &#34;agcgw-trigger-authtype&#34;: &#34;apigw-client&#34;,
        &#34;host&#34;: &#34;10.14.4.31&#34;,
        &#34;content-type&#34;: &#34;application/json;charset=UTF-8&#34;,
        &#34;packagename&#34;: &#34;com.itwcx.test&#34;,
        &#34;appid&#34;: &#34;5765880207853994135&#34;,
        &#34;authorization&#34;: &#34;SDK-HMAC-SHA256 containPath=false,containBody=false,containQuery=false,accessId=m7rTGQ2uNvyq1AGfJFLo,timestamp=1711175951586,signedHeaders=appid;productid,signature=44fe3b4da7d80ec9dfee07ca3747c448e94254b5454fef87f468150089f38623&#34;,
        &#34;x-forwarded-host&#34;: &#34;10.14.4.31&#34;,
        &#34;appversion&#34;: &#34;1.0.0&#34;,
        &#34;sdkplatformversion&#34;: &#34;3.2.0.0&#34;,
        &#34;sdktype&#34;: &#34;TS&#34;,
        &#34;content-length&#34;: &#34;19&#34;,
        &#34;x-real-ip&#34;: &#34;10.134.64.11&#34;,
        &#34;sdkversion&#34;: &#34;1.0.0&#34;,
        &#34;x-forwarded-proto&#34;: &#34;https&#34;,
        &#34;sdkservicename&#34;: &#34;agconnect-cloud&#34;,
        &#34;x-trace-id&#34;: &#34;f09f1070-6d7b-46a9-875d-bfb2bc4bfdb9&#34;,
        &#34;productid&#34;: &#34;388421841222044287&#34;,
        &#34;sdkplatform&#34;: &#34;OpenHarmony&#34;
    },

    &#34;queryStringParameters&#34;: &#34;&#34;,
    &#34;queryParameters&#34;: null,
    &#34;body&#34;: &#34;{\&#34;name\&#34;:\&#34;zhangsan\&#34;}&#34;,
    &#34;isBase64Encoded&#34;: false,
    &#34;pathVariable&#34;: null
}</code></pre></div>
<p>此处我们只查看参数event的HTTP请求的相关说明：</p>
<p>比较官网的event参数格式与自己日志打印的格式，看看有什么不同</p>
<p><a href="#R-image-f0912ddacbef1027dd4f40554b5db05b" class="lightbox-link"><img alt="截图3" class="lazy lightbox figure-image" loading="lazy" src="../Wungmeisilong/hugoBlog_pub.git/log/5.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/image-2.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-f0912ddacbef1027dd4f40554b5db05b"><img alt="截图3" class="lazy lightbox lightbox-image" loading="lazy" src="../Wungmeisilong/hugoBlog_pub.git/log/5.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/image-2.png"></a></p>
<p><a href="#R-image-6278b10c5b64f21c68773fb7bc5faf07" class="lightbox-link"><img alt="截图4" class="lazy lightbox figure-image" loading="lazy" src="../Wungmeisilong/hugoBlog_pub.git/log/5.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/image-3.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-6278b10c5b64f21c68773fb7bc5faf07"><img alt="截图4" class="lazy lightbox lightbox-image" loading="lazy" src="../Wungmeisilong/hugoBlog_pub.git/log/5.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/image-3.png"></a></p>
<p>观察可知问题出在body这个参数，参数是json格式，而日志打印的是字符格式，我们需要把字符格式转换成json格式，做如下操作：</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-TS" data-lang="TS"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">stringify</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;querystring&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">myHandler</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">event</span>, <span style="color:#a6e22e">context</span>, <span style="color:#a6e22e">callback</span>, <span style="color:#a6e22e">logger</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">logger</span>.<span style="color:#a6e22e">info</span>(<span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">event</span>));
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">obj</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">parse</span>(<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">body</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">obj</span>.<span style="color:#a6e22e">name</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">callback</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">code</span>: <span style="color:#66d9ef">200</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">`Hello </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">name</span><span style="color:#e6db74">}</span><span style="color:#e6db74">.`</span>
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> { <span style="color:#a6e22e">myHandler</span> };</span></span></code></pre></div>
<p>上面的代码中</p>
<hr>
<pre><code>const obj = JSON.parse(event.body)
const name = obj.name
</code></pre>
<hr>
<p>就是转换操作。</p>
<h2 id="认证服务">认证服务</h2>
<h3 id="登录页面的实现">登录页面的实现</h3>
<p><a href="#R-image-bb164ebcec97a3327d47ae73e5f7e36c" class="lightbox-link"><img alt="截图7" class="lazy lightbox figure-image" loading="lazy" src="../Wungmeisilong/hugoBlog_pub.git/log/5.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/image-4.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-bb164ebcec97a3327d47ae73e5f7e36c"><img alt="截图7" class="lazy lightbox lightbox-image" loading="lazy" src="../Wungmeisilong/hugoBlog_pub.git/log/5.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/image-4.png"></a></p>
<p>登录验证代码：</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">AuthMode</span>,<span style="color:#a6e22e">Login</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@hw-agconnect/auth-component&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">AuthUser</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@hw-agconnect/cloud&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">router</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@ohos.router&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">@Entry</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">@Component</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">struct</span> <span style="color:#a6e22e">MyLogin</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">message</span>: <span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Hello World&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">build() {</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Row() {</span>
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">Column() {</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Login</span>({
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">modes</span><span style="color:#f92672">:</span>[<span style="color:#a6e22e">AuthMode</span>.<span style="color:#a6e22e">PHONE_VERIFY_CODE</span>],
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">onSuccess</span><span style="color:#f92672">:</span>(<span style="color:#a6e22e">usr</span>:<span style="color:#66d9ef">AuthUser</span>) <span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">router</span>.<span style="color:#a6e22e">pushUrl</span>({<span style="color:#a6e22e">url</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;page/MyWelcome&#39;</span>})
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>        }){
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">Button</span>(<span style="color:#e6db74">&#39;登录&#39;</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">height</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p><a href="#R-image-b0654eaf343437a7b4a3fbc4ef4291ed" class="lightbox-link"><img alt="12" class="lazy lightbox figure-image" loading="lazy" src="../Wungmeisilong/hugoBlog_pub.git/log/5.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/image-5.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-b0654eaf343437a7b4a3fbc4ef4291ed"><img alt="12" class="lazy lightbox lightbox-image" loading="lazy" src="../Wungmeisilong/hugoBlog_pub.git/log/5.%E4%BA%91%E7%AB%AF%E4%B8%80%E4%BD%93%E5%8C%96%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BA%91%E5%87%BD%E6%95%B0%E6%97%A5%E5%BF%97/image-5.png"></a></p>
<h2 id="页面登录获取验证码">页面登录获取验证码</h2>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">Auth</span>, <span style="color:#a6e22e">VerifyCodeAction</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@hw-agconnect/cloud&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">cloud</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@hw-agconnect/cloud&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">hilog</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@ohos.hilog&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">router</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@ohos.router&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">@Entry</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">@Component</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">struct</span> <span style="color:#a6e22e">MyLogin</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">countDown</span>: <span style="color:#66d9ef">number</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//用一个变量来获取setinterval的ID
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">intervalId</span>:<span style="color:#66d9ef">number</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> <span style="color:#75715e">//因为这个变量与页面显示无关所以不用@State注释
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">verifyCodeButtonEnable</span>:<span style="color:#66d9ef">boolean</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">verifyCodeButtonText</span>:<span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;获取验证码&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">phoneNumber</span>: <span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">verifyCode</span>:<span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;输入验证码&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">//定时器代码
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">waiting</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonEnable</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonText</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">countDown</span><span style="color:#e6db74">}</span><span style="color:#e6db74">s`</span><span style="color:#75715e">//在一点击时，就显示10S
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">intervalId</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">setInterval</span>(() <span style="color:#f92672">=&gt;</span> { <span style="color:#75715e">//要知道定时器结束没有需要知道它的返回结果，这个结果可以通过setinterval的ID获取。
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonText</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">countDown</span><span style="color:#e6db74">}</span><span style="color:#e6db74">s`</span><span style="color:#75715e">//将倒计时显示出来
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">if</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">countDown</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//如果减到0，清楚定时器
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">clearInterval</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">intervalId</span>)<span style="color:#75715e">//得到返回结果后清楚定时器
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">countDown</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">intervalId</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonText</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;获取验证码&#39;</span><span style="color:#75715e">//倒计时结束时回复
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonEnable</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span> <span style="color:#75715e">//当点击时按键不可用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> <span style="color:#75715e">//不需要再往下继续执行了，所以return
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">countDown</span><span style="color:#f92672">--</span>
</span></span><span style="display:flex;"><span>    },<span style="color:#ae81ff">1000</span>)<span style="color:#75715e">//每隔1秒减一次
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  }
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">judgement</span>(){
</span></span><span style="display:flex;"><span>     <span style="color:#66d9ef">if</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">phoneNumber</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">===</span> <span style="color:#ae81ff">11</span>){
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonEnable</span><span style="color:#f92672">=</span><span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>     }<span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonEnable</span><span style="color:#f92672">=</span><span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">async</span> <span style="color:#a6e22e">sending_verifyCode</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> { <span style="color:#75715e">//调用方式异步调用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">cloud</span>.<span style="color:#a6e22e">auth</span>().<span style="color:#a6e22e">requestVerifyCode</span>({
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">verifyCodeType</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">kind</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;phone&#39;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">phoneNumber</span>: <span style="color:#66d9ef">this.phoneNumber</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">countryCode</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;86&#39;</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">action</span>: <span style="color:#66d9ef">VerifyCodeAction.REGISTER_LOGIN</span>, <span style="color:#75715e">//验证的方式
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">lang</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;zh_CN&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">sendInterval</span>: <span style="color:#66d9ef">10</span>
</span></span><span style="display:flex;"><span>      })
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;VerifCode&#39;</span>,<span style="color:#e6db74">&#39;Success&#39;</span>)
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">AlertDialog</span>.<span style="color:#a6e22e">show</span>({ <span style="color:#a6e22e">title</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;错误&#39;</span>, <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;验证码失败&#39;</span> })<span style="color:#75715e">//弹窗内容
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;VerifCode&#39;</span>,<span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">e</span>))
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">async</span> <span style="color:#a6e22e">login_verify</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">result</span>  <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">cloud</span>.<span style="color:#a6e22e">auth</span>().<span style="color:#a6e22e">signIn</span>({ <span style="color:#75715e">//定义一个变量来接收它的返回结果,返回的是result，在通过result.gitUsr获取用户信息
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">credentialInfo</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">kind</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;phone&#39;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">countryCode</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;86&#39;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">phoneNumber</span>: <span style="color:#66d9ef">this.phoneNumber</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">verifyCode</span>: <span style="color:#66d9ef">this.verifyCode</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      })
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">user</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">getUser</span>()
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">AppStorage</span>.<span style="color:#a6e22e">SetOrCreate</span>(<span style="color:#e6db74">&#39;user&#39;</span>,<span style="color:#a6e22e">user</span>)<span style="color:#75715e">//存储用户到 AppStorage
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;Login&#39;</span>,<span style="color:#e6db74">&#39;Success&#39;</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">router</span>.<span style="color:#a6e22e">replaceUrl</span>({ <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;pages/MyLoginLignOut&#39;</span> })
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">AlertDialog</span>.<span style="color:#a6e22e">show</span>({<span style="color:#a6e22e">title</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;错误&#39;</span>,<span style="color:#a6e22e">message</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;登陆失败&#39;</span>})
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;Login&#39;</span>,<span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">e</span>))
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">build() {</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Row() {</span>
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">Column() {</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">TextInput</span>({<span style="color:#a6e22e">placeholder</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;请输入手机号&#39;</span>})
</span></span><span style="display:flex;"><span>          .<span style="color:#66d9ef">type</span>(<span style="color:#a6e22e">InputType</span>.Number)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">onChange</span>(<span style="color:#a6e22e">values</span> <span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">phoneNumber</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">values</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">judgement</span>()<span style="color:#75715e">//点击获取验证码时，判断按键是否可用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        })
</span></span><span style="display:flex;"><span>       <span style="color:#a6e22e">Row</span>(){
</span></span><span style="display:flex;"><span>         <span style="color:#a6e22e">TextInput</span>({<span style="color:#a6e22e">placeholder</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;验证码&#39;</span>})
</span></span><span style="display:flex;"><span>           .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;70%&#39;</span>)
</span></span><span style="display:flex;"><span>           .<span style="color:#a6e22e">onChange</span>(<span style="color:#a6e22e">value</span> <span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>             <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCode</span><span style="color:#f92672">=</span><span style="color:#a6e22e">value</span>
</span></span><span style="display:flex;"><span>           })
</span></span><span style="display:flex;"><span>         <span style="color:#a6e22e">Button</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonText</span>)
</span></span><span style="display:flex;"><span>           .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;30%&#39;</span>)
</span></span><span style="display:flex;"><span>           .<span style="color:#a6e22e">enabled</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonEnable</span>)<span style="color:#75715e">//该属性是控制按键是否可用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>           .<span style="color:#a6e22e">onClick</span>(<span style="color:#66d9ef">async</span> () <span style="color:#f92672">=&gt;</span>{ <span style="color:#75715e">//所在方法加async
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>             <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">waiting</span>()
</span></span><span style="display:flex;"><span>             <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">sending_verifyCode</span>()
</span></span><span style="display:flex;"><span>           })
</span></span><span style="display:flex;"><span>       }
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Button</span>(<span style="color:#e6db74">&#39;登录&#39;</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">enabled</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">phoneNumber</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">===</span> <span style="color:#ae81ff">11</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCode</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">===</span> <span style="color:#ae81ff">6</span>)<span style="color:#75715e">//手机号11位，且验证码六位时点击登录才有效
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>          .<span style="color:#a6e22e">onClick</span>(<span style="color:#66d9ef">async</span> ()<span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">login_verify</span>()
</span></span><span style="display:flex;"><span>          })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">height</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>登录后跳转到的页面：</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">cloud</span> ,{<span style="color:#a6e22e">AuthUser</span>}<span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;@hw-agconnect/cloud&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">hilog</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@ohos.hilog&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">router</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@ohos.router&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">@Entry</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">@Component</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">struct</span> <span style="color:#a6e22e">MyLoginLignOut</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">photoUrl</span>:<span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span> <span style="color:#75715e">//存储头像路径
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">displayName</span>:<span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span> <span style="color:#75715e">//存储用户昵称
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">@StorageLink</span>(<span style="color:#e6db74">&#39;user&#39;</span>) <span style="color:#a6e22e">user</span>:<span style="color:#66d9ef">AuthUser</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span> <span style="color:#75715e">//定义一个AuthUser的类型来获取用户存的值，(&#39;user&#39;)叫存储对象名，是在另一个页面定义的名字
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">aboutToAppear</span>(){<span style="color:#75715e">//build渲染前就运行
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//1.cloud.auth().getCurrentUser()
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//2.appStorage
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">displayName</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">getDisplayName</span>()<span style="color:#75715e">//获取用户，间接通过用户拿到用户头像等数据。
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">photoUrl</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">getPhotoUrl</span>()
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">build() {</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Row() {</span>
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">Column() {</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Row</span>(){
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">Image</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">photoUrl?this.photoUrl</span>:<span style="color:#66d9ef">$r</span>(<span style="color:#e6db74">&#39;app.media.app_icon&#39;</span>))
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">width</span>(<span style="color:#ae81ff">80</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">height</span>(<span style="color:#ae81ff">80</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">onClick</span>(()<span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>              <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">photoUrl</span><span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;https://img.btstu.cn/api/images/5a2a5d5560223.jpg&#39;</span>
</span></span><span style="display:flex;"><span>            })
</span></span><span style="display:flex;"><span>        }.<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">justifyContent</span>(<span style="color:#a6e22e">FlexAlign</span>.<span style="color:#a6e22e">Center</span>)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">padding</span>({<span style="color:#a6e22e">bottom</span>:<span style="color:#66d9ef">70</span>})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">TextInput</span>({<span style="color:#a6e22e">placeholder</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;设置昵称&#39;</span>,<span style="color:#a6e22e">text</span>:<span style="color:#66d9ef">this.displayName</span>})
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">fontSize</span>(<span style="color:#ae81ff">25</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">fontWeight</span>(<span style="color:#a6e22e">FontWeight</span>.<span style="color:#a6e22e">Bold</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">onChange</span>(<span style="color:#a6e22e">value</span> <span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">displayName</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">value</span>
</span></span><span style="display:flex;"><span>          })
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Button</span>(<span style="color:#e6db74">&#39;保存&#39;</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">margin</span>({<span style="color:#a6e22e">top</span>:<span style="color:#66d9ef">10</span>,<span style="color:#a6e22e">bottom</span>:<span style="color:#66d9ef">10</span>})
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">width</span>(<span style="color:#ae81ff">90</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">onClick</span>(<span style="color:#66d9ef">async</span> ()<span style="color:#f92672">=&gt;</span>{<span style="color:#75715e">//保存图片与用户名
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>              <span style="color:#66d9ef">await</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">updateProfile</span>({<span style="color:#75715e">//保存头像、用户名
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">displayName</span>: <span style="color:#66d9ef">this.displayName</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">photoUrl</span>: <span style="color:#66d9ef">this.photoUrl</span>
</span></span><span style="display:flex;"><span>              })
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;updateProfile&#39;</span>,<span style="color:#e6db74">&#39;Success&#39;</span>)
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;updateProfile&#39;</span>,<span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">e</span>))
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>          })
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Button</span>(<span style="color:#e6db74">&#39;登出&#39;</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">margin</span>({<span style="color:#a6e22e">top</span>:<span style="color:#66d9ef">10</span>,<span style="color:#a6e22e">bottom</span>:<span style="color:#66d9ef">10</span>})
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">width</span>(<span style="color:#ae81ff">90</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">onClick</span>(<span style="color:#66d9ef">async</span> ()<span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>              <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">cloud</span>.<span style="color:#a6e22e">auth</span>().<span style="color:#a6e22e">signOut</span>()
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;SignOut&#39;</span>,<span style="color:#e6db74">&#39;Success&#39;</span>)
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">router</span>.<span style="color:#a6e22e">replaceUrl</span>({<span style="color:#a6e22e">url</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;pages/MyLogin&#39;</span>})
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;SignOut&#39;</span>,<span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">e</span>))
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>          })
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">height</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h3 id="个人设置中心">个人设置中心</h3>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">cloud</span>, { <span style="color:#a6e22e">AuthUser</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@hw-agconnect/cloud&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">router</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@ohos.router&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">hilog</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@ohos.hilog&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">picker</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@ohos.file.picker&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">@Entry</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">@Component</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">struct</span> <span style="color:#a6e22e">MyIndex</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">photoUrl</span>: <span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span> <span style="color:#75715e">//存储头像路径
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">displayName</span>: <span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span> <span style="color:#75715e">//存储用户昵称
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">@StorageLink</span>(<span style="color:#e6db74">&#39;user&#39;</span>) <span style="color:#a6e22e">user</span>: <span style="color:#66d9ef">AuthUser</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span> <span style="color:#75715e">//定义一个AuthUser的类型来获取用户存的值，(&#39;user&#39;)叫存储对象名，是在另一个页面定义的名字
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">uploading</span>: <span style="color:#66d9ef">boolean</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span><span style="color:#75715e">//用户控制图片是否可以点击，上传时不可以点击
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">uploadingText</span>: <span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;0%&#39;</span><span style="color:#75715e">//上传进度
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">aboutToAppear() {</span>  <span style="color:#75715e">//build渲染前就运行
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// 1. cloud.auth().getCurrentUser()
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// 2. AppStorage
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">displayName</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">user</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">getDisplayName</span>()<span style="color:#75715e">//获取用户，间接通过用户拿到用户头像等数据。加问号是因为在aboutToAppear运行时是无法获取用户名或图片等信息的
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">photoUrl</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">user</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">getPhotoUrl</span>()
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">build() {</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Row() {</span>
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">Column</span>({ <span style="color:#a6e22e">space</span>: <span style="color:#66d9ef">10</span> }) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Stack() {</span><span style="color:#75715e">//Stack该属性让它所包含的组件重叠
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>          <span style="color:#a6e22e">Image</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">photoUrl</span> <span style="color:#f92672">?</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">photoUrl</span> : <span style="color:#66d9ef">$r</span>(<span style="color:#e6db74">&#39;app.media.user_dark&#39;</span>))
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">width</span>(<span style="color:#ae81ff">70</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">height</span>(<span style="color:#ae81ff">70</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">borderRadius</span>(<span style="color:#ae81ff">70</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">enabled</span>(<span style="color:#f92672">!</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">uploading</span>)
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">onComplete</span>(()<span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>              <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">uploading</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>            })
</span></span><span style="display:flex;"><span>            .<span style="color:#a6e22e">onClick</span>(<span style="color:#66d9ef">async</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>              <span style="color:#75715e">// this.photoUrl = &#39;网络图片的地址&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>              <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// 1. 从相簿中选照片
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">options</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">picker</span>.<span style="color:#a6e22e">PhotoSelectOptions</span>()
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">options</span>.<span style="color:#a6e22e">MIMEType</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">picker</span>.<span style="color:#a6e22e">PhotoViewMIMETypes</span>.<span style="color:#a6e22e">IMAGE_TYPE</span><span style="color:#75715e">//媒体类型：视频还是图片
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">options</span>.<span style="color:#a6e22e">maxSelectNumber</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span><span style="color:#75715e">//最大选择个数
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">picker</span>.<span style="color:#a6e22e">PhotoViewPicker</span>().<span style="color:#a6e22e">select</span>(<span style="color:#a6e22e">options</span>)<span style="color:#75715e">//把参数传给下面的方法，把结果传给result
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;Upload&#39;</span>, <span style="color:#e6db74">`Picker Success </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">photoUris</span>[<span style="color:#ae81ff">0</span>]<span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>)
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">uploading</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// 2. 调云存储 api 上传照片
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">cloud</span>.<span style="color:#a6e22e">storage</span>().<span style="color:#a6e22e">upload</span>({
</span></span><span style="display:flex;"><span>                  <span style="color:#a6e22e">localPath</span>: <span style="color:#66d9ef">result.photoUris</span>[<span style="color:#ae81ff">0</span>],<span style="color:#75715e">//本地图片路径
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                  <span style="color:#a6e22e">cloudPath</span><span style="color:#f92672">:</span> <span style="color:#e6db74">`test/</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">getUid</span>()<span style="color:#e6db74">}</span><span style="color:#e6db74">.jpg`</span>,<span style="color:#75715e">//云存储那边存储的路径
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                  <span style="color:#a6e22e">onUploadProgress</span>: <span style="color:#66d9ef">event</span> <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">percent</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">floor</span>(<span style="color:#ae81ff">100</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">loaded</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">total</span>)<span style="color:#75715e">//获取上传的百分比，event.loaded：已上传的自己数，event.total：总的自己数，Math.floor：舍弃小数点
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">uploadingText</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">percent</span><span style="color:#e6db74">}</span><span style="color:#e6db74">%`</span>  <span style="color:#75715e">//数值更新到uploadingText
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                  }
</span></span><span style="display:flex;"><span>                })
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;Upload&#39;</span>, <span style="color:#e6db74">&#39;Upload Success&#39;</span>)
</span></span><span style="display:flex;"><span>                <span style="color:#75715e">// 3. 获取上传照片的网络地址
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">url</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">cloud</span>.<span style="color:#a6e22e">storage</span>().<span style="color:#a6e22e">getDownloadURL</span>(<span style="color:#e6db74">`test/</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">getUid</span>()<span style="color:#e6db74">}</span><span style="color:#e6db74">.jpg`</span>)<span style="color:#75715e">//获取公网地址，拿到图片在网络上的地址
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">photoUrl</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">url</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&amp;ts=</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">new</span> Date().<span style="color:#a6e22e">getTime</span>()<span style="color:#e6db74">}</span><span style="color:#e6db74">`</span><span style="color:#75715e">//这个里做这个处理是因为，图片被缓存起来了，上传的时候如果只是给云存储的地址，那么在传第二张图片到云存储后，photoUrl再获取时，因为图片地址不变照片也不会改变，它会缓存起来，而在图片后面加上一个时间图片就不在被缓存。
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#75715e">// this.uploading = false
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>                <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;Upload&#39;</span>, <span style="color:#e6db74">`url: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">url</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>)
</span></span><span style="display:flex;"><span>              } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">error</span>(<span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;Upload&#39;</span>, <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">e</span>))
</span></span><span style="display:flex;"><span>              }
</span></span><span style="display:flex;"><span>            })
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">uploading</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// 显示上传进度
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#a6e22e">Text</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">uploadingText</span>)
</span></span><span style="display:flex;"><span>              .<span style="color:#a6e22e">width</span>(<span style="color:#ae81ff">70</span>)
</span></span><span style="display:flex;"><span>              .<span style="color:#a6e22e">height</span>(<span style="color:#ae81ff">70</span>)
</span></span><span style="display:flex;"><span>              .<span style="color:#a6e22e">borderRadius</span>(<span style="color:#ae81ff">70</span>)
</span></span><span style="display:flex;"><span>              .<span style="color:#a6e22e">fontColor</span>(<span style="color:#e6db74">&#39;white&#39;</span>)
</span></span><span style="display:flex;"><span>              .<span style="color:#a6e22e">backgroundColor</span>(<span style="color:#e6db74">&#39;black&#39;</span>)
</span></span><span style="display:flex;"><span>              .<span style="color:#a6e22e">opacity</span>(<span style="color:#ae81ff">0.6</span>)
</span></span><span style="display:flex;"><span>              .<span style="color:#a6e22e">fontSize</span>(<span style="color:#ae81ff">24</span>)
</span></span><span style="display:flex;"><span>              .<span style="color:#a6e22e">fontWeight</span>(<span style="color:#a6e22e">FontWeight</span>.<span style="color:#a6e22e">Bolder</span>)
</span></span><span style="display:flex;"><span>              .<span style="color:#a6e22e">textAlign</span>(<span style="color:#a6e22e">TextAlign</span>.<span style="color:#a6e22e">Center</span>)<span style="color:#75715e">//文字对齐方式
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>          }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">TextInput</span>({ <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;请设置昵称&#39;</span>, <span style="color:#a6e22e">text</span>: <span style="color:#66d9ef">this.displayName</span> })
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;50%&#39;</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">onChange</span>(<span style="color:#a6e22e">value</span> <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">displayName</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">value</span>
</span></span><span style="display:flex;"><span>          })
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Button</span>(<span style="color:#e6db74">`保存`</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">onClick</span>(<span style="color:#66d9ef">async</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>              <span style="color:#66d9ef">await</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">updateProfile</span>({
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">displayName</span>: <span style="color:#66d9ef">this.displayName</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">photoUrl</span>: <span style="color:#66d9ef">this.photoUrl</span>
</span></span><span style="display:flex;"><span>              })
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;updateProfile&#39;</span>, <span style="color:#e6db74">&#39;Success&#39;</span>)
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">error</span>(<span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;updateProfile&#39;</span>, <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">e</span>))
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>          })
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Button</span>(<span style="color:#e6db74">`登出`</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">onClick</span>(<span style="color:#66d9ef">async</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>              <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">cloud</span>.<span style="color:#a6e22e">auth</span>().<span style="color:#a6e22e">signOut</span>()
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;SignOut&#39;</span>, <span style="color:#e6db74">&#39;Success&#39;</span>)
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">router</span>.<span style="color:#a6e22e">replaceUrl</span>({ <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;pages/MyLoginCustom&#39;</span> })
</span></span><span style="display:flex;"><span>            } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>              <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">error</span>(<span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;SignOut&#39;</span>, <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">e</span>))
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>          })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">height</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<h2 id="登录页面">登录页面</h2>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">Auth</span>, <span style="color:#a6e22e">VerifyCodeAction</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@hw-agconnect/cloud&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">cloud</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@hw-agconnect/cloud&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">hilog</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@ohos.hilog&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">router</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;@ohos.router&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">@Entry</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">@Component</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">struct</span> <span style="color:#a6e22e">MyLogin</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">countDown</span>: <span style="color:#66d9ef">number</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//用一个变量来获取setinterval的ID
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">intervalId</span>:<span style="color:#66d9ef">number</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> <span style="color:#75715e">//因为这个变量与页面显示无关所以不用@State注释
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">verifyCodeButtonEnable</span>:<span style="color:#66d9ef">boolean</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">verifyCodeButtonText</span>:<span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;获取验证码&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">phoneNumber</span>: <span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">@State</span> <span style="color:#a6e22e">verifyCode</span>:<span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;输入验证码&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">private</span> <span style="color:#a6e22e">mainPage</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`pages/StudentPage`</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">async</span> <span style="color:#a6e22e">aboutToAppear() {</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">user</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">cloud</span>.<span style="color:#a6e22e">auth</span>().<span style="color:#a6e22e">getCurrentUser</span>()<span style="color:#75715e">//获取当前认证用户
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">user</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span>) {<span style="color:#75715e">//获取用户是否为空，如果用户已经断开会话，则下一次进入时间走时登录流程
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">AppStorage</span>.<span style="color:#a6e22e">SetOrCreate</span>(<span style="color:#e6db74">&#39;user&#39;</span>, <span style="color:#a6e22e">user</span>) <span style="color:#75715e">// 如果会话未断开，不走登录流程，而是吧用户数据存到AppStorage
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">router</span>.<span style="color:#a6e22e">replaceUrl</span>({ <span style="color:#a6e22e">url</span>: <span style="color:#66d9ef">this.mainPage</span> })
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">error</span>(<span style="color:#ae81ff">0</span>, <span style="color:#e6db74">&#39;Login&#39;</span>, <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">e</span>))
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">//定时器代码
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">waiting</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonEnable</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonText</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">countDown</span><span style="color:#e6db74">}</span><span style="color:#e6db74">s`</span><span style="color:#75715e">//在一点击时，就显示10S
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">intervalId</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">setInterval</span>(() <span style="color:#f92672">=&gt;</span> { <span style="color:#75715e">//要知道定时器结束没有需要知道它的返回结果，这个结果可以通过setinterval的ID获取。
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonText</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">countDown</span><span style="color:#e6db74">}</span><span style="color:#e6db74">s`</span><span style="color:#75715e">//将倒计时显示出来
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">if</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">countDown</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//如果减到0，清楚定时器
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">clearInterval</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">intervalId</span>)<span style="color:#75715e">//得到返回结果后清楚定时器
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">countDown</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">intervalId</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonText</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;获取验证码&#39;</span><span style="color:#75715e">//倒计时结束时回复
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonEnable</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span> <span style="color:#75715e">//当点击时按键不可用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> <span style="color:#75715e">//不需要再往下继续执行了，所以return
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      }
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">countDown</span><span style="color:#f92672">--</span>
</span></span><span style="display:flex;"><span>    },<span style="color:#ae81ff">1000</span>)<span style="color:#75715e">//每隔1秒减一次
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  }
</span></span><span style="display:flex;"><span>   <span style="color:#a6e22e">judgement</span>(){
</span></span><span style="display:flex;"><span>     <span style="color:#66d9ef">if</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">phoneNumber</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">===</span> <span style="color:#ae81ff">11</span>){
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonEnable</span><span style="color:#f92672">=</span><span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>     }<span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>       <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonEnable</span><span style="color:#f92672">=</span><span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>   }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">async</span> <span style="color:#a6e22e">sending_verifyCode</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> { <span style="color:#75715e">//调用方式异步调用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">cloud</span>.<span style="color:#a6e22e">auth</span>().<span style="color:#a6e22e">requestVerifyCode</span>({
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">verifyCodeType</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">kind</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;phone&#39;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">phoneNumber</span>: <span style="color:#66d9ef">this.phoneNumber</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">countryCode</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;86&#39;</span>
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">action</span>: <span style="color:#66d9ef">VerifyCodeAction.REGISTER_LOGIN</span>, <span style="color:#75715e">//验证的方式
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">lang</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;zh_CN&#39;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">sendInterval</span>: <span style="color:#66d9ef">10</span>
</span></span><span style="display:flex;"><span>      })
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;VerifCode&#39;</span>,<span style="color:#e6db74">&#39;Success&#39;</span>)
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">AlertDialog</span>.<span style="color:#a6e22e">show</span>({ <span style="color:#a6e22e">title</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;错误&#39;</span>, <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;验证码失败&#39;</span> })<span style="color:#75715e">//弹窗内容
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;VerifCode&#39;</span>,<span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">e</span>))
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">async</span> <span style="color:#a6e22e">login_verify</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">result</span>  <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">cloud</span>.<span style="color:#a6e22e">auth</span>().<span style="color:#a6e22e">signIn</span>({ <span style="color:#75715e">//定义一个变量来接收它的返回结果,返回的是result，在通过result.gitUsr获取用户信息
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">credentialInfo</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">kind</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;phone&#39;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">countryCode</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;86&#39;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">phoneNumber</span>: <span style="color:#66d9ef">this.phoneNumber</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">verifyCode</span>: <span style="color:#66d9ef">this.verifyCode</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      })
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">user</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">getUser</span>()
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">AppStorage</span>.<span style="color:#a6e22e">SetOrCreate</span>(<span style="color:#e6db74">&#39;user&#39;</span>,<span style="color:#a6e22e">user</span>)<span style="color:#75715e">//存储用户到 AppStorage
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;Login&#39;</span>,<span style="color:#e6db74">&#39;Success&#39;</span>)
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">router</span>.<span style="color:#a6e22e">replaceUrl</span>({ <span style="color:#a6e22e">url</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;pages/MyLoginLignOut&#39;</span> })
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">e</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">AlertDialog</span>.<span style="color:#a6e22e">show</span>({<span style="color:#a6e22e">title</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;错误&#39;</span>,<span style="color:#a6e22e">message</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;登陆失败&#39;</span>})
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">hilog</span>.<span style="color:#a6e22e">info</span>(<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;Login&#39;</span>,<span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">e</span>))
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">build() {</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">Row() {</span>
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">Column() {</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">TextInput</span>({<span style="color:#a6e22e">placeholder</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;请输入手机号&#39;</span>})
</span></span><span style="display:flex;"><span>          .<span style="color:#66d9ef">type</span>(<span style="color:#a6e22e">InputType</span>.Number)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">onChange</span>(<span style="color:#a6e22e">values</span> <span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">phoneNumber</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">values</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">judgement</span>()<span style="color:#75715e">//点击获取验证码时，判断按键是否可用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        })
</span></span><span style="display:flex;"><span>       <span style="color:#a6e22e">Row</span>(){
</span></span><span style="display:flex;"><span>         <span style="color:#a6e22e">TextInput</span>({<span style="color:#a6e22e">placeholder</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;验证码&#39;</span>})
</span></span><span style="display:flex;"><span>           .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;70%&#39;</span>)
</span></span><span style="display:flex;"><span>           .<span style="color:#a6e22e">onChange</span>(<span style="color:#a6e22e">value</span> <span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>             <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCode</span><span style="color:#f92672">=</span><span style="color:#a6e22e">value</span>
</span></span><span style="display:flex;"><span>           })
</span></span><span style="display:flex;"><span>         <span style="color:#a6e22e">Button</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonText</span>)
</span></span><span style="display:flex;"><span>           .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;30%&#39;</span>)
</span></span><span style="display:flex;"><span>           .<span style="color:#a6e22e">enabled</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCodeButtonEnable</span>)<span style="color:#75715e">//该属性是控制按键是否可用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>           .<span style="color:#a6e22e">onClick</span>(<span style="color:#66d9ef">async</span> () <span style="color:#f92672">=&gt;</span>{ <span style="color:#75715e">//所在方法加async
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>             <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">waiting</span>()
</span></span><span style="display:flex;"><span>             <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">sending_verifyCode</span>()
</span></span><span style="display:flex;"><span>           })
</span></span><span style="display:flex;"><span>       }
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Button</span>(<span style="color:#e6db74">&#39;登录&#39;</span>)
</span></span><span style="display:flex;"><span>          .<span style="color:#a6e22e">enabled</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">phoneNumber</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">===</span> <span style="color:#ae81ff">11</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">verifyCode</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">===</span> <span style="color:#ae81ff">6</span>)<span style="color:#75715e">//手机号11位，且验证码六位时点击登录才有效
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>          .<span style="color:#a6e22e">onClick</span>(<span style="color:#66d9ef">async</span> ()<span style="color:#f92672">=&gt;</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">login_verify</span>()
</span></span><span style="display:flex;"><span>          })
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>      .<span style="color:#a6e22e">width</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">height</span>(<span style="color:#e6db74">&#39;100%&#39;</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>希望文档对你有所帮助。</p>
<div class="box attachments cstyle default" style="--VARIABLE-BOX-color: fuchsia;">
  <div class="box-label"><i class="fab fa-hackerrank"></i> 附件</div>
  <ul class="box-content attachments-files">
  </ul>
</div>

  <footer class="footline">
              <i class='fa-fw fas fa-calendar'></i> 2024年3月23日
<div class="R-taxonomy taxonomy-categories cstyle" title="类别" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/categories/%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/">应用开发</a></li>
  </ul>
</div>
  </footer>
</article>
<article class="default">
  <header class="headline">
<div class="R-taxonomy taxonomy-tags cstyle tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/tags/%E5%89%8D%E7%AB%AF/">前端</a></li>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/tags/%E7%BD%91%E7%BB%9C/">网络</a></li>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/tags/%E7%BD%91%E7%AB%99/">网站</a></li>
  </ul>
</div>
  </header>

<h1 id="8如何用旧电脑搭建自己的服务器">8.如何用旧电脑搭建自己的服务器？</h1>

<p>拥有一个属于自己的服务器个人感觉就很赞，我最初是在不买公网IP情况下，用一台电脑做服务器，然后另外一台电脑可以远程访问，部署网站，然后别人可以访问这个网站，这样一个功能。如果你也有这样的想法还请阅读下去，希望自己的经验对你有所帮助。</p>
<h2 id="所需设备">所需设备</h2>
<p>一台旧电脑，一台目前在使用的电脑。</p>
<h2 id="在旧电脑上安装natapp程序">在旧电脑上安装natapp程序</h2>
<p>在百度上搜索NATAPP，或点击这个链接:<a href="https://natapp.cn/" rel="external" target="_blank">NATAPP</a>,</p>
<p><a href="#R-image-7eacc3659cfaf6a96e11bb1f2f48c6ed" class="lightbox-link"><img alt="网站首页面" class="lazy lightbox figure-image" loading="lazy" src="%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-02-02%20113627.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-7eacc3659cfaf6a96e11bb1f2f48c6ed"><img alt="网站首页面" class="lazy lightbox lightbox-image" loading="lazy" src="%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-02-02%20113627.png"></a></p>
<p>进入网站后先简单注册一下用户,顺便实名认证一下，因为买隧道会提示需要实名，接着点击首页下载自己的电脑系统对应版本，我的是Windows（下面的测试也是基于Windows）</p>
<p><a href="#R-image-bb5c0da71a8971f1fe909f6d334dc2ae" class="lightbox-link"><img alt="下载页面" class="lazy lightbox figure-image" loading="lazy" src="%E5%9B%BE1.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-bb5c0da71a8971f1fe909f6d334dc2ae"><img alt="下载页面" class="lazy lightbox lightbox-image" loading="lazy" src="%E5%9B%BE1.png"></a></p>
<p>下载好后解压文件，得到如下图程序：</p>
<p><a href="#R-image-7f49df186e556fc7895e79a7b0d71ded" class="lightbox-link"><img alt="下载页面" class="lazy lightbox figure-image" loading="lazy" src="%E5%9B%BE2.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-7f49df186e556fc7895e79a7b0d71ded"><img alt="下载页面" class="lazy lightbox lightbox-image" loading="lazy" src="%E5%9B%BE2.png"></a></p>
<p>在解压文件下新建一个文件： <code>config.ini</code>,做好这一步后我们去购买免费的隧道，如下图：</p>
<p><a href="#R-image-3fbb551b42a2a3e9f3d380fcf885e341" class="lightbox-link"><img alt="下载页面" class="lazy lightbox figure-image" loading="lazy" src="%E5%9B%BE3.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-3fbb551b42a2a3e9f3d380fcf885e341"><img alt="下载页面" class="lazy lightbox lightbox-image" loading="lazy" src="%E5%9B%BE3.png"></a></p>
<p>点击网站的文档，然后点击教程/文档里的 <strong>使用本地配置文件config.ini</strong> 文章，</p>
<p><a href="#R-image-917c61b59f13e1cc9407888fadab594e" class="lightbox-link"><img alt="下载页面" class="lazy lightbox figure-image" loading="lazy" src="%E5%9B%BE6.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-917c61b59f13e1cc9407888fadab594e"><img alt="下载页面" class="lazy lightbox lightbox-image" loading="lazy" src="%E5%9B%BE6.png"></a></p>
<p>然后复制里面的配置信息：</p>
<p><a href="#R-image-8ee4f2f7091c4ce80774e8a0be609fcd" class="lightbox-link"><img alt="下载页面" class="lazy lightbox figure-image" loading="lazy" src="%E5%9B%BE7.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-8ee4f2f7091c4ce80774e8a0be609fcd"><img alt="下载页面" class="lazy lightbox lightbox-image" loading="lazy" src="%E5%9B%BE7.png"></a></p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-config.ini" data-lang="config.ini"><span style="display:flex;"><span><span style="color:#75715e">#将本文件放置于natapp同级目录 程序将读取 [default] 段</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#在命令行参数模式如 natapp -authtoken=xxx 等相同参数将会覆盖掉此配置</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#命令行参数 -config= 可以指定任意config.ini文件</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">[default]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">authtoken</span><span style="color:#f92672">=</span>                      <span style="color:#e6db74">#对应一条隧道的authtoken</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clienttoken</span><span style="color:#f92672">=</span>                    <span style="color:#e6db74">#对应客户端的clienttoken,将会忽略authtoken,若无请留空,</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">log</span><span style="color:#f92672">=</span><span style="color:#e6db74">none                        #log 日志文件,可指定本地文件, none=不做记录,stdout=直接屏幕输出 ,默认为none</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">loglevel</span><span style="color:#f92672">=</span><span style="color:#e6db74">ERROR                  #日志等级 DEBUG, INFO, WARNING, ERROR 默认为 DEBUG</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">http_proxy</span><span style="color:#f92672">=</span>                     <span style="color:#e6db74">#代理设置 如 http://10.123.10.10:3128 非代理上网用户请务必留空</span></span></span></code></pre></div>
<p>在字段<code>authtoken</code>后面值在我的隧道配置里可以找到，如下：</p>
<p><a href="#R-image-1116c86e1e38d8aa6c5cc3cc86ce2f5f" class="lightbox-link"><img alt="下载页面" class="lazy lightbox figure-image" loading="lazy" src="%E5%9B%BE4.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-1116c86e1e38d8aa6c5cc3cc86ce2f5f"><img alt="下载页面" class="lazy lightbox lightbox-image" loading="lazy" src="%E5%9B%BE4.png"></a></p>
<p>复制下图<code>authtoken</code>的值填到config.ini文件里</p>
<p><a href="#R-image-e67c98f6bdb0e76aac5388abd58f7682" class="lightbox-link"><img alt="下载页面" class="lazy lightbox figure-image" loading="lazy" src="%E5%9B%BE5.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e67c98f6bdb0e76aac5388abd58f7682"><img alt="下载页面" class="lazy lightbox lightbox-image" loading="lazy" src="%E5%9B%BE5.png"></a></p>
<p>我这边演示的效果如下：</p>
<p><a href="#R-image-c433953a2fb98eb33c412cffe176cf4e" class="lightbox-link"><img alt="下载页面" class="lazy lightbox figure-image" loading="lazy" src="%E5%9B%BE8.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-c433953a2fb98eb33c412cffe176cf4e"><img alt="下载页面" class="lazy lightbox lightbox-image" loading="lazy" src="%E5%9B%BE8.png"></a>
<a href="#R-image-14009df9a60180fe56eefce5475003c4" class="lightbox-link"><img alt="下载页面" class="lazy lightbox figure-image" loading="lazy" src="%E5%9B%BE9.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-14009df9a60180fe56eefce5475003c4"><img alt="下载页面" class="lazy lightbox lightbox-image" loading="lazy" src="%E5%9B%BE9.png"></a></p>
<p>完成上面的操作后，我们运行NATAPP程序，结果如下：</p>
<p><a href="#R-image-e72bb7bd029c124f5777a410a1866caa" class="lightbox-link"><img alt="下载页面" class="lazy lightbox figure-image" loading="lazy" src="%E5%9B%BE10.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e72bb7bd029c124f5777a410a1866caa"><img alt="下载页面" class="lazy lightbox lightbox-image" loading="lazy" src="%E5%9B%BE10.png"></a></p>
<p>你会得到一个随机的网址，这个网址指向你的本地端口，当你有网站挂载到本地端口时，你就可以通过网址访问到你的本地端口网址，内网外网都可以，但是这个网址每一次运行都会不一样，这点需要注意，然后就是端口的设置，看下图：</p>
<p><a href="#R-image-e40a475a8d5a8d806da42ac16e01e036" class="lightbox-link"><img alt="下载页面" class="lazy lightbox figure-image" loading="lazy" src="%E5%9B%BE5.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e40a475a8d5a8d806da42ac16e01e036"><img alt="下载页面" class="lazy lightbox lightbox-image" loading="lazy" src="%E5%9B%BE5.png"></a></p>
<p>我这里写的的端口是1313，如果你网站运行后不在1313，例如你运行网站后，本地的网站启动端口是8080.那你就把这个地方的1313改为8080就可以了。</p>
<p>下面我们举个例子看看，假设我现在我需要外网的网友访问我挂在在自己电脑本地的网站，那们在做好上面的操作后我先去启动自己的网站，这里使用hugo的网站模版，用code程序打开网站模版，然后调出终端，在终端输入命令 <code>hugo server</code> ,表示启动网站，如下图：</p>
<p><a href="#R-image-12bb163430998803f4ed007f1022b789" class="lightbox-link"><img alt="下载页面" class="lazy lightbox figure-image" loading="lazy" src="%E5%9B%BE11.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-12bb163430998803f4ed007f1022b789"><img alt="下载页面" class="lazy lightbox lightbox-image" loading="lazy" src="%E5%9B%BE11.png"></a></p>
<p>然后去复制刚才运行NATAPP程序后的网站，在浏览器中打开，我们先试一下局域网能不能访问，结果如下：</p>
<p><a href="#R-image-2e18babd7f9f104f37dd4c59d31209e4" class="lightbox-link"><img alt="下载页面" class="lazy lightbox figure-image" loading="lazy" src="%E5%9B%BE12.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-2e18babd7f9f104f37dd4c59d31209e4"><img alt="下载页面" class="lazy lightbox lightbox-image" loading="lazy" src="%E5%9B%BE12.png"></a></p>
<p>将网站发给自己的朋友，测试外网是否可以访问，</p>
<p><a href="#R-image-7144f7f4d15f8f2424718e32c0b5527f" class="lightbox-link"><img alt="下载页面" class="lazy lightbox figure-image" loading="lazy" src="%E5%9B%BE13.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-7144f7f4d15f8f2424718e32c0b5527f"><img alt="下载页面" class="lazy lightbox lightbox-image" loading="lazy" src="%E5%9B%BE13.png"></a></p>
<p>结果是外网可以正常可以访问。</p>
<p><a href="#R-image-e0f8228af8f87aef161bdff193183214" class="lightbox-link"><img alt="下载页面" class="lazy lightbox figure-image" loading="lazy" src="%E5%9B%BE14.png" style=" height: auto; width: auto;"></a>
<a href="javascript:history.back();" class="lightbox-back" id="R-image-e0f8228af8f87aef161bdff193183214"><img alt="下载页面" class="lazy lightbox lightbox-image" loading="lazy" src="%E5%9B%BE14.png"></a></p>
<p>那么到这里你的电脑其实就充当了一台服务器，将网站放到了你电脑上，只要你的电脑保持开机状态那么别人就可以一直访问你的网站，或许NATAPP网站还有别的有趣功能，所以你不妨去摸索摸索，所不定可以找到多次启动NATAPP指向你本地的网址不变，你也就不用每次启动后都要发新的网址给对方了。</p>
<p>那么其实到这里就差不多了，但是我们还需要用一台电脑控制另一台电脑，简而言之就是电脑的远程登录，其实电脑远程登录有许多的方法，这里我需要借助一个来实现内网穿透，其实上面的旧电脑变服务器也是使用了内网穿透，
<div class="box attachments cstyle default" style="--VARIABLE-BOX-color: fuchsia;">
  <div class="box-label"><i class="fab fa-hackerrank"></i> 附件</div>
  <ul class="box-content attachments-files">
  </ul>
</div></p>

  <footer class="footline">
              <i class='fa-fw fas fa-calendar'></i> 2024年1月31日
<div class="R-taxonomy taxonomy-categories cstyle" title="类别" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/">技术分享</a></li>
  </ul>
</div>
  </footer>
</article>
<article class="default">
  <header class="headline">
<div class="R-taxonomy taxonomy-tags cstyle tags" title="标签" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <ul>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/tags/%E5%89%8D%E7%AB%AF/">前端</a></li>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/tags/%E7%BD%91%E7%AB%99/">网站</a></li>
  </ul>
</div>
  </header>

<h1 id="9唛盟杯项目下载与启动">9.唛盟杯项目下载与启动</h1>

<h2 id="一为什么要创建属于自己博客网站">一、为什么要创建属于自己博客网站</h2>
<p>自从进入大三的学习，自己接触了许多开发板、以及七七八八的软件，个人记忆力又不咋地，平时很容易把重要或者重复的知识忘记，所以我希望做一个网站记录自己所学的知识，方便查找，但我没学<strong>JS</strong>，深入学又耗费时间，如果你也有我的一些情况，想自己创建一个网站“玩玩”，那么请看下去，希望自己的一些分享能对想短期内创建静态网站、且没学过网站设计的朋友有所帮助。</p>
<h2 id="二选择静态网站布局工具以及远程仓库">二、选择静态网站布局工具以及远程仓库</h2>
<h3 id="1工具的选择">1、工具的选择</h3>
<p>在这里我就只推荐<strong>hugo</strong>，因为本人用的就是hugo，其他的并不是很了解（如果你有更好的方法还请通过留言告诉我，谢谢！），首先确定自己要装在哪个系统上，比如装在Windows、Linux或者Mac（苹果系统），确定好这个后你就去网上搜安装方法即可，一定要搜和自己电脑系统有关的安装方法，不然安装会走很多坑的。
<strong>Windows</strong>系统。我建议使用choco工具在终端上安装，如果电脑没安装choco工具，还请自行安装。
<strong>Linux</strong>系统。首先确定自己的Linux的发行版本，举个例子，像<strong>红帽公司</strong>的和ContentOS的，这两个发行版本使用的工具可能就不一样，像ContentOS使用的是工具Yum工具安装的，还请你在网上自行搜索。
<strong>Mac</strong>系统。使用<strong>brew</strong>工具进行安装，不知道怎么用brew还请网上搜一下。
下载好后使用如下命令检查是否安装成功。</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>    <span style="color:#a6e22e">hugo</span> <span style="color:#a6e22e">verser</span></span></span></code></pre></div>
<h3 id="2远程仓库的选择">2、远程仓库的选择</h3>
<p>因为要把网站的相关信息放到网上，一遍搜索查找，我们需要一个远程的仓库来装这些数据，无疑github是比较好的选择，当然Gitee、gitLab这些应该也可以（本人没有过）。至于为什么选github我想你只要稍微了解一点IT这行的，多少都知道其原因，不知道也没关系，只要能存放我们的网站数据就行。
首先你需要去注册一个github账号，并掌握在线创建、删除、导入和下载仓库，以及文件的上传、删除修改等操作，这些其实并不是很难，刚开始需要你换一点时间，详细请上网搜索。</p>
<p>当我们hugo下载好和仓库创建等操作都学会后我们就可以开始操作了。</p>
<h2 id="三仓库创建与静态网站布局">三、仓库创建与静态网站布局</h2>
<p>仓库创建最好是和自己github的账户名字一样，且都是小写，然后后面跟着
<strong>.github.io</strong>,例如：</p>
<hr>
<pre><code>wang32.github.io
</code></pre>
<p>这是比较稳妥的做法，如果你不想这么做还请自己花时间去琢磨别的方法。接着我么创建一个空项目，什么都不需要哦!</p>
<p>下一步是静态网站的部署，首先你需要下载一个hugo的主题，也就是用别人的网页主题作为自己网站的基础，这样呢我们及时没学过JS也可以部署自己的网站。
创建一个目录，比如<strong>myblog</strong>，接着用code打开这个目录，在code编译器中打开终端窗口监视器，在里面输入命令</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>   <span style="color:#a6e22e">hugo</span> <span style="color:#a6e22e">new</span> <span style="color:#a6e22e">site</span></span></span></code></pre></div>
<p>这个时候myblog目录下会生成一个<strong>theme</strong>的目录，用来放主题，把下载好的hugo主题放在该目录下，在使用如下命令：</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>    <span style="color:#a6e22e">hugo</span> <span style="color:#f92672">--</span><span style="color:#a6e22e">theme</span>=&lt;<span style="color:#a6e22e">主题名字</span>&gt;  <span style="color:#f92672">--</span><span style="color:#a6e22e">baseURL</span>=<span style="color:#e6db74">&#34;&lt;你github仓库的路径&gt;&#34;</span> <span style="color:#f92672">--</span><span style="color:#a6e22e">buildDrafts</span></span></span></code></pre></div>
<p>举个例子：</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>   <span style="color:#a6e22e">hugo</span> <span style="color:#f92672">--</span><span style="color:#a6e22e">theme</span>=<span style="color:#a6e22e">m10c</span>  <span style="color:#f92672">--</span><span style="color:#a6e22e">baseURL</span>=<span style="color:#e6db74">&#34;https://wung32.github.io/&#34;</span> <span style="color:#f92672">--</span><span style="color:#a6e22e">buildDrafts</span></span></span></code></pre></div>
<p>上面m10c是主题的名字，也就是你下载的hugo主题名字，而https://wung32.github.io/仓库路径。</p>
<p>在这你需要注意：如果不是Windows系统这的<strong>baseURL</strong>可能写为<strong>baseUrl</strong>,要确定这件事就去看<strong>hugo.tolm</strong>文件，有的主题写为<strong>config.tolm</strong>,里面的第一二行就会提到baseURL，注意这里的要去主题目录里找。而不是在你创建的目录myblog下找。
运行上面的代码没问题就会在你创建的myblog目录下产生一个<strong>public</strong>的目录，里面装的就是你的网页信息。</p>
<p>接着使用git命令把这个文件推送到远程的仓库，一般的步骤如下：</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code class="language-git" data-lang="git">    git init #初始化：本地建库（即文件夹）
    git add  #添加到仓库：代码文件放入本地库，
    git commit -m “注释内容” #提交时要给注释
    git remote add origin https://github.com/xu-xiaoya/Elegent.git #远程仓库关联

    git push (-u) origin master #本地仓库的代码推送到远程仓库Github上</code></pre></div>
<p>如果报错：</p>
<hr>
<pre><code>error: RPC failed; HTTP 504 curl 18 HTTP/2 stream 7 was reset
send-pack: unexpected disconnect while reading sideband packet
fatal: the remote end hung up unexpectedly
Everything up-to-date
</code></pre>
<p>那么加一句：</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code class="language-git" data-lang="git">    git config --global http.postBuffer 524288000</code></pre></div>
<p>接着继续推送就是了。</p>
<p>然后去自己的仓库，点击设置，找到Page选项，有个<strong>Custom domain</strong>，在那里写上你的网站名称。</p>
<h2 id="四买一个域名">四、买一个域名</h2>
<p>我在没买之前网页一直加载不出来，自己也不知道为什么（如果你知道不用买域名也可以实现网站部署还请告诉我，谢谢啦！）。所以我自己是买了一个六块钱的域名的，试用期一年；当你买一个域名后要记得去解析域名，然后把解析的域名写到上面说的<strong>Custom domain</strong>那个地方，比如你解析得到的域名是：myblog.wang32.com,那么你就写这个上去。</p>
<p>如果不知道怎么买。怎么解析，那么——是的，一样上网查一下。</p>
<h2 id="五网站的优化">五、网站的优化</h2>
<p>这个我不建议你一个人慢慢磨，慢慢的去网上找方法，其实制作主题的作者已经把怎么基于他的主题做出自己的网站的方法了，所以你老老实实的跟着作者的文档走就是了，实在有些地方不懂的在查一查看。</p>
<h2 id="补充">补充</h2>
<h4 id="1为什么我插入的图片无法显示">1、为什么我插入的图片无法显示？</h4>
<p>图片的显示：首先要看你的主题是基于什么语言写的，比如我的是markdown,对于这个语言只需要使用：</p>
<div class="highlight wrap-code" dir="auto"><pre tabindex="0"><code class="language-hugo" data-lang="hugo">    ![nihao](../../../public/webfonts/fa-brands-400.svg)</code></pre></div>
<p>上面的这个方法就可以让图片显示，但实际上不一定能可以，因为hugo有个目录创建规则——<strong>Page Bundles</strong>(连接：https://www.rectcircle.cn/series/hugo/content-management/page-bundles/)，如果不按照这个规则创建，那么你使用别人的主题，插入图片时可能无法显示。</p>
<p>光是上面这点我就搞了一个星期，所以还是希望你好好看一下Page Bundles文档。</p>
<p>今天先到这了……
2023年12月11日</p>
<hr>
<div class="box attachments cstyle default" style="--VARIABLE-BOX-color: fuchsia;">
  <div class="box-label"><i class="fab fa-hackerrank"></i> 附件</div>
  <ul class="box-content attachments-files">
  </ul>
</div>

  <footer class="footline">
              <i class='fa-fw fas fa-calendar'></i> 2023年12月11日
<div class="R-taxonomy taxonomy-categories cstyle" title="类别" style="--VARIABLE-TAGS-BG-color: var(--INTERNAL-TAG-BG-color);">
  <i class="fa-fw fas fa-layer-group"></i>
  <ul>
    <li><a class="term-link" href="../Wungmeisilong/hugoBlog_pub.git/categories/%E4%B8%80%E4%BD%93%E5%8C%96%E5%BC%80%E5%8F%91/">一体化开发</a></li>
  </ul>
</div>
  </footer>
</article>
          </section>
        </div>
      </main>
    </div>
    <script src="../Wungmeisilong/hugoBlog_pub.git/js/clipboard/clipboard.min.js?1743933522" defer></script>
    <script src="../Wungmeisilong/hugoBlog_pub.git/js/perfect-scrollbar/perfect-scrollbar.min.js?1743933522" defer></script>
    <script src="../Wungmeisilong/hugoBlog_pub.git/js/theme.min.js?1743933522" defer></script>
  </body>
</html>
